<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.353">

  <title>UNL R Workshops - Data Wrangling</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="custom.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Data Wrangling</h1>
  <p class="subtitle">Using dplyr</p>

<div class="quarto-title-authors">
</div>

</section>
<section class="slide level2">


<img data-src="images/dplyr.png" width="580" class="r-stretch quarto-figure-center"><p class="caption">Data Wrangling Cheat Sheet, by <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">RStudio</a></p><aside class="notes">
<p>should already have this loaded if loaded all of tidyverse at the beginning</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="dplyr-terminology" class="slide level2">
<h2>dplyr terminology</h2>
<p>There are some of the primary <code>dplyr</code> <em>verbs</em>, representing distinct data analysis tasks:</p>
<ul>
<li><p><strong>Filter</strong>: Select specified rows of a data frame, produce subsets</p></li>
<li><p><strong>Arrange</strong>: Reorder the rows of a data frame</p></li>
<li><p><strong>Select</strong>: Select particular columns of a data frame</p></li>
<li><p><strong>Mutate</strong>: Add new or change existing columns of the data frame (as functions of existing columns)</p></li>
<li><p><strong>Summarise</strong>: Create collapsed summaries of a data frame</p></li>
<li><p><strong>Group By</strong>: Introduce structure to a data frame</p></li>
</ul>
</section>
<section id="motivating-example-pipe-operator" class="slide level2">
<h2>Motivating Example (Pipe Operator)</h2>
<p>Use the pipe operator to combine dplyr functions in chain, which allows us to perform more complicated data manipulations</p>
<p>Syntax (Pipe dataframe as input into the dplyr function):</p>
<pre><code>dataframe %&gt;% dplyr_function()</code></pre>

<img data-src="images/pipe_usage.png" width="480" class="r-stretch quarto-figure-center"><p class="caption">Pipe Example, by <a href="https://www.sharpsightlabs.com/blog/dplyr-quick-introduction/">Sharp Sight Labs</a></p></section>
<section id="the-pipe-operator" class="slide level2 smaller">
<h2>The pipe operator <code>%&gt;%</code></h2>
<p><code>f(x) %&gt;% g(y)</code> is equivalent to <code>g(f(x),y)</code></p>
<p>i.e.&nbsp;the output of one function is used as input to the next function. This function can be the identity</p>
<p>Consequences:</p>
<ul>
<li><code>x %&gt;% f(y)</code> is the same as <code>f(x,y)</code></li>
<li>statements of the form <code>k(h(g(f(x,y),z),u),v,w)</code> become <code>x %&gt;% f(y) %&gt;% g(z) %&gt;% h(u) %&gt;% k(v,w)</code></li>
<li>read <code>%&gt;%</code> as “then do”</li>
<li>in non-mathematical terms, the piping operator allows you to apply more than one different function at the same time to the same data frame.</li>
</ul>
</section>
<section id="filter" class="slide level2 smaller">
<h2>Filter</h2>
<p>Read in the pitch data set. The data are from an experiment on different advanced metrics of MLB baseball pitchers different pitch types.</p>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-1_51756317ac3409e011206a42f7fbea66">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="#cb2-2"></a>pitch <span class="ot">&lt;-</span> </span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="fu">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/unl-statistics/R-workshops/main/r-format/data/pitch.csv"</span>)</span>
<span id="cb2-4"><a href="#cb2-4"></a></span>
<span id="cb2-5"><a href="#cb2-5"></a>pitch[<span class="sc">-</span><span class="dv">1</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="fu">filter</span>(pitcher_hand <span class="sc">==</span> <span class="st">"R"</span>, pitch_type <span class="sc">==</span> <span class="st">"CU"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>  <span class="fu">head</span>(<span class="at">n=</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-2_50285dc643001df46f606b923e59a2df">
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pitcher_hand</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pitch_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">spin_rate</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ab_result</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">action_result</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">adj_h</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2795</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3000.024</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">2795</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3146.456</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3646</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3012.067</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">2795</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3026.256</td>
<td style="text-align: left;">HB</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><code>filter</code> is similar to the base function <code>subset</code></p>
</section>
<section id="filter-cont." class="slide level2">
<h2>Filter (cont.)</h2>
<p>Multiple conditions in <code>filter</code> are combined with a logical AND (i.e.&nbsp;all conditions must be fulfilled)</p>
<p>e.g.&nbsp;</p>
<p><code>filter(pitcher_hand == "R", pitch_type == "CU")</code></p>
<p>Logical expressions can also be used</p>
<p>e.g.&nbsp;</p>
<p><code>filter(pitcher_hand == "R" &amp;  pitch_type == "CU")</code> or <code>filter(pitch_type == "CU" | subject == "KN")</code></p>
</section>
<section id="your-turn-3-minutes" class="slide level2 inverse">
<h2>Your Turn (~3 minutes)</h2>
<ol type="1">
<li><p>Use <code>filter</code> to get a subset of the <code>pitchdata</code> dataset</p></li>
<li><p>Ex. Filter the data down to left handed pitchers, who throw a curve with at least 3300 rpms (spin_rate)..</p></li>
<li><p><code>%&gt;%</code> the subset and create a plot</p></li>
</ol>
<p>hint: what is the default first argument of the <code>ggplot</code> function?</p>
</section>
<section id="solution" class="slide level2">
<h2>Solution</h2>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-3_6f9eea9134fa7be48430298b1192114b">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>pitch <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="fu">filter</span>(spin_rate <span class="sc">&gt;=</span> <span class="dv">3200</span> <span class="sc">&amp;</span> pitcher_hand <span class="sc">==</span> <span class="st">"L"</span> <span class="sc">&amp;</span> pitch_type <span class="sc">==</span> <span class="st">"CU"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>action_result, <span class="at">y=</span>spin_rate)) <span class="sc">+</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span><span class="fu">as.factor</span>(playerid))) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="3-dplyr_files/figure-html/unnamed-chunk-3-1.png" width="672" class="r-stretch"></section>
<section id="arrange" class="slide level2">
<h2>Arrange</h2>
<p>Easy way to arrange your data in ascending or descending order</p>
<div class="cell" data-hash="3-dplyr_cache/html/arr.desc_ba31300231159f5526c4065f02102a19">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>pitch <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">subset</span>(<span class="at">select =</span> <span class="fu">c</span>(<span class="st">"playerid"</span>, <span class="st">"spin_rate"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(playerid), spin_rate) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="3-dplyr_cache/html/arr.desc2_fb5beadc7a34eacf608076bfddd0ca0f">
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">spin_rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">16669</td>
<td style="text-align: right;">3055.508</td>
</tr>
<tr class="even">
<td style="text-align: right;">16669</td>
<td style="text-align: right;">3072.307</td>
</tr>
<tr class="odd">
<td style="text-align: right;">16669</td>
<td style="text-align: right;">3075.055</td>
</tr>
<tr class="even">
<td style="text-align: right;">16669</td>
<td style="text-align: right;">3164.546</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15686</td>
<td style="text-align: right;">3032.944</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="arrange-1" class="slide level2">
<h2>Arrange</h2>
<p>Successive variables are used for breaking ties from previous variables.</p>
<div class="cell" data-hash="3-dplyr_cache/html/arr.asc_558f1b6223a9b193d3237e3ba7a1268d">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>pitch <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">subset</span>(<span class="at">select =</span> <span class="fu">c</span>(<span class="st">"playerid"</span>, <span class="st">"spin_rate"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">arrange</span>(playerid, spin_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="3-dplyr_cache/html/arr.asc2_8be932ef7ad23ca330b19687473ecccc">
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">spin_rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">476</td>
<td style="text-align: right;">3012.770</td>
</tr>
<tr class="even">
<td style="text-align: right;">476</td>
<td style="text-align: right;">3017.095</td>
</tr>
<tr class="odd">
<td style="text-align: right;">476</td>
<td style="text-align: right;">3024.533</td>
</tr>
<tr class="even">
<td style="text-align: right;">476</td>
<td style="text-align: right;">3028.328</td>
</tr>
<tr class="odd">
<td style="text-align: right;">476</td>
<td style="text-align: right;">3040.097</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="your-turn" class="slide level2 inverse">
<h2>Your Turn</h2>
<ol type="1">
<li><p>Look up the help file for the function <code>slice</code>.</p></li>
<li><p>Use <code>slice</code> on the arranged <code>pitchdata</code> dataset to select a single row</p></li>
<li><p>use <code>slice</code> to select multiple rows</p></li>
</ol>
<p>Hint: Use the entire data set</p>
</section>
<section id="solution-1" class="slide level2 smaller">
<h2>Solution</h2>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-4_a00593b10c320df56329196ce5fc421d">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>pitch[<span class="sc">-</span><span class="dv">1</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(playerid), spin_rate) <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="fu">slice</span>(<span class="dv">11</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-5_dac11a2e2612e46123e7b3e713e48800">
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pitcher_hand</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pitch_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">spin_rate</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ab_result</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">action_result</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">adj_h</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">15540</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3041.712</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
</div>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-6_021e29666911d3577e1254108721dcab">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>pitch[<span class="sc">-</span><span class="dv">1</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(playerid), spin_rate) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-7_7fee7afd08414f0500fee0bb58089cdd">
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pitcher_hand</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pitch_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">spin_rate</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ab_result</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">action_result</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">adj_h</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3055.508</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">C</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3072.307</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3075.055</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3164.546</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">C</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15686</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3032.944</td>
<td style="text-align: left;">K</td>
<td style="text-align: left;">S</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="select" class="slide level2 smaller">
<h2>Select</h2>
<ul>
<li>Using Select we are easily able to create a subset of our data. This is similar to the subset function in base.</li>
</ul>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-8_69279e15cccd9f93647e4db559032cdd">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>pitch <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="fu">select</span>(playerid, pitcher_hand, action_result, spin_rate) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-9_a18c53b53c94bcb4cdd35eb43f4d2058">
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pitcher_hand</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">action_result</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">spin_rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2795</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">3000.024</td>
</tr>
<tr class="even">
<td style="text-align: right;">959</td>
<td style="text-align: left;">L</td>
<td style="text-align: left;">C</td>
<td style="text-align: right;">3051.596</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2795</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">3146.456</td>
</tr>
<tr class="even">
<td style="text-align: right;">3646</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">3012.067</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2795</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">3026.256</td>
</tr>
<tr class="even">
<td style="text-align: right;">2795</td>
<td style="text-align: left;">L</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">3038.633</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="summarise" class="slide level2">
<h2>Summarise</h2>
<ul>
<li>Finding summary statistics of a metric</li>
</ul>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-10_f421fe4c9ac654d3736f031b7b2cb2dd">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co">#na.rm - remove NAs from calculation</span></span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a>pitch <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>    <span class="fu">summarise</span>(<span class="at">mean_spinrate =</span> <span class="fu">mean</span>(spin_rate, <span class="at">na.rm=</span><span class="cn">TRUE</span>), </span>
<span id="cb9-5"><a href="#cb9-5"></a>              <span class="at">sd_spinrate =</span> <span class="fu">sd</span>(spin_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-11_e7968ac1f8d17ffbb082d657ae1ed944">
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_spinrate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sd_spinrate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3125.67</td>
<td style="text-align: right;">109.8614</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="summarise-and-group_by" class="slide level2 smaller">
<h2><code>summarise</code> and <code>group_by</code></h2>
<ul>
<li>Finding summary statistics of a metric after accounting first for other variables</li>
</ul>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-12_455668bd1be19b5e86ed643c77dc58a7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>pitch <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>    <span class="fu">group_by</span>(playerid) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>    <span class="fu">summarise</span>(<span class="at">mean_spinrate =</span> <span class="fu">mean</span>(spin_rate, <span class="at">na.rm=</span><span class="cn">TRUE</span>), </span>
<span id="cb10-4"><a href="#cb10-4"></a>              <span class="at">sd_spinrate =</span> <span class="fu">sd</span>(spin_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-5"><a href="#cb10-5"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-13_2ba8457edd5bbf75dde7740e69e980c3">
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_spinrate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sd_spinrate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">476</td>
<td style="text-align: right;">3065.601</td>
<td style="text-align: right;">44.64957</td>
</tr>
<tr class="even">
<td style="text-align: right;">607</td>
<td style="text-align: right;">3278.486</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">657</td>
<td style="text-align: right;">3042.489</td>
<td style="text-align: right;">43.01146</td>
</tr>
<tr class="even">
<td style="text-align: right;">959</td>
<td style="text-align: right;">3056.323</td>
<td style="text-align: right;">42.85757</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1030</td>
<td style="text-align: right;">3044.114</td>
<td style="text-align: right;">37.69737</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="your-turn-1" class="slide level2 inverse">
<h2>Your Turn</h2>
<ol type="1">
<li><p>Select only playerid, spin_rate, and action result</p></li>
<li><p>Group by both playerid and action result and find mean and sd of spin rates</p></li>
<li><p><code>%&gt;%</code> the summaries into a <code>ggplot</code> histogram</p></li>
</ol>
</section>
<section id="a-solution" class="slide level2">
<h2>A Solution</h2>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-14_5de684ac4c7f2f615539a4a3b149e050">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>pitch <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">select</span>(playerid, spin_rate, action_result) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>    <span class="fu">group_by</span>(playerid, action_result) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>    <span class="fu">summarise</span>(<span class="at">mean_spin =</span> <span class="fu">mean</span>(spin_rate), </span>
<span id="cb11-5"><a href="#cb11-5"></a>              <span class="at">sd_spin =</span> <span class="fu">sd</span>(spin_rate)) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mean_spin)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="3-dplyr_files/figure-html/unnamed-chunk-14-1.png" width="672" class="r-stretch"></section>
<section id="mutate" class="slide level2">
<h2><code>mutate</code></h2>
<ul>
<li><p>Change an existing or create a new variable into the data</p></li>
<li><p>Creating a new column in your data set that represents something new</p></li>
<li><p>Great for calculations</p></li>
<li><p>How would I create a calculation for how far above or below each players pitches are from their own average spin rates?</p></li>
</ul>
</section>
<section id="mutate-example" class="slide level2">
<h2><code>mutate</code> Example</h2>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-15_d23f21e3072e5571dfbce3bdcbf18624">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>pitch <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>    <span class="fu">select</span>(playerid, spin_rate, action_result) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>    <span class="fu">group_by</span>(playerid, action_result) <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>    <span class="fu">summarise</span>(<span class="at">mean_spin =</span> <span class="fu">mean</span>(spin_rate), </span>
<span id="cb12-5"><a href="#cb12-5"></a>              <span class="at">sd_spin =</span> <span class="fu">sd</span>(spin_rate)) <span class="sc">%&gt;%</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>    <span class="fu">mutate</span>(<span class="at">mean =</span> <span class="fu">sum</span>(mean_spin) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>    <span class="fu">mutate</span>(<span class="at">difference =</span> mean <span class="sc">-</span> mean_spin) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
# Groups:   playerid [3]
  playerid action_result mean_spin sd_spin  mean difference
     &lt;dbl&gt; &lt;chr&gt;             &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
1      476 B                 3077.   52.1  3058.      -19.1
2      476 F                 3101.    1.69 3058.      -43.4
3      476 S                 3041.   17.0  3058.       17.2
4      476 X                 3013.   NA    3058.       45.3
5      607 B                 3278.   NA    3278.        0  
6      657 B                 3047.   46.2  3036.      -11.2</code></pre>
</div>
</div>
</section>
<section id="utilzing-ifelse" class="slide level2">
<h2>Utilzing <code>ifelse</code></h2>
<ul>
<li><p>Sometimes you are tasked to create a new column based on a clause</p></li>
<li><p><code>ifelse</code> function allows you to create an if else statement within the creation of the new variable.</p></li>
<li><p>Consider rewriting the handedness of our pitchers.</p></li>
<li><p>If the pitcher_hand is R write “Right” if not, “Left”</p></li>
</ul>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-16_e10699add4ead1c3656eb2abc8ad3b73">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>pitch <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="fu">select</span>(pitcher_hand) <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3"></a>  <span class="fu">mutate</span>(<span class="at">Handedness =</span> <span class="fu">ifelse</span>(pitcher_hand <span class="sc">==</span> <span class="st">"R"</span>, <span class="st">"Right"</span>, <span class="st">"Left"</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  pitcher_hand Handedness
  &lt;chr&gt;        &lt;chr&gt;     
1 R            Right     
2 L            Left      
3 R            Right     
4 R            Right     
5 R            Right     
6 L            Left      </code></pre>
</div>
</div>
</section>
<section id="caution-with-pipe-operator" class="slide level2">
<h2>Caution with pipe operator</h2>
<p>Why does <code>pitch$mean_spin</code> not return a real-valued summary??</p>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-17_3b8d190b22a043ae869185c60c166586">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>pitch<span class="sc">$</span>mean_spin</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co">#Columns in our dataset</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="fu">colnames</span>(pitch[,<span class="sc">-</span><span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "playerid"      "pitcher_hand"  "pitch_type"    "spin_rate"    
[5] "ab_result"     "action_result" "adj_h"        </code></pre>
</div>
</div>
</section>
<section id="reasons-for-pipe-operator-mishaps" class="slide level2">
<h2>Reasons for pipe operator mishaps</h2>
<ul>
<li><p>When we use the piping operator like we have been, the data is only ever being changed within the sequence</p></li>
<li><p>We only ever look at this new variable in the previous chunk.</p></li>
<li><p>It has not been created globally into the dataset itself</p></li>
<li><p>To do this, you need to create your new column by declaring it as its own variable.</p></li>
</ul>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-18_514313bbcbc0a9544187a11c5bf2f00a">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>pitch<span class="sc">$</span>mean_spin <span class="ot">&lt;-</span> <span class="fu">mean</span>(pitch<span class="sc">$</span>spin_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="mutate-or-summarize" class="slide level2 smaller">
<h2><code>mutate</code> OR <code>summarize</code>?</h2>
<p>Both commands introduce new variables - so which one should we use?</p>
<div class="columns">
<div class="column">
<p><code>mutate</code></p>
<ul>
<li><p><strong>adds variables</strong> to the existing data set</p></li>
<li><p>The resulting variables must have the <strong>same length</strong> as the original data</p></li>
<li><p>e.g.&nbsp;use for transformations, combinations of multiple variables</p></li>
</ul>
</div><div class="column">
<p><code>summarize</code></p>
<ul>
<li><p><strong>creates aggregates</strong> of the original data</p></li>
<li><p>The number of rows of the new dataset is determined by the number of combinations of the grouping structure.</p></li>
<li><p>The number of columns is determined by the number of grouping variables and the summary statistics.</p></li>
</ul>
</div>
</div>
</section>
<section id="shortcuts" class="slide level2">
<h2>Shortcuts</h2>
<p><code>summarize(n = n())</code> is equivalent to <code>tally()</code> (Number of unique rows in dataset)</p>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-19_458a841714aa26b8d89bdfb5eb7c5a68">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>pitch <span class="sc">%&gt;%</span> <span class="fu">tally</span>()</span>
<span id="cb21-2"><a href="#cb21-2"></a>pitch <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Number of unique observations in each group</p>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-20_2a0c0152fd89ffb486b1dcfbf94d6c96">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>pitch <span class="sc">%&gt;%</span> <span class="fu">count</span>(playerid, action_result)</span>
<span id="cb22-2"><a href="#cb22-2"></a>pitch <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(playerid, action_result) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>())</span>
<span id="cb22-3"><a href="#cb22-3"></a>pitch <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(playerid, action_result) <span class="sc">%&gt;%</span> <span class="fu">tally</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="your-turn-10-min" class="slide level2 inverse">
<h2>Your Turn (10 min)</h2>
<p>Based on your (limited) knowledge of baseball, you determine what is a “successful” curveball. Then determine what pitchers pitched the most successful curveballs!</p>
<p>Note: There are many different ways of answering this question. None are wrong and you don’t need to know anything about baseball to try. Consider criteria that it needs to meet.</p>
<p>Ex. A successful curveball needs to be above 90 mph in velocity and have over 3100 rpms in spin rate.</p>
<p>utilize the <code>sum()</code> function to add up all your curveballs!</p>
</section>
<section id="one-solution" class="slide level2">
<h2>One Solution</h2>
<p>Consider a success as any strike (S), catch (C), and foul ball (F)</p>
<!--and any batted ball resulting in a "adj_h" less than the league average of .300 BABIP (according to MLB.com) -->
<div class="cell" data-figure.width="1" data-hash="3-dplyr_cache/html/unnamed-chunk-21_42e6ac09eab675df936c6446c7640825">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>SScurve <span class="ot">&lt;-</span> pitch <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="fu">select</span>(<span class="st">"playerid"</span>, <span class="st">"action_result"</span>, <span class="st">"ab_result"</span>, <span class="st">"adj_h"</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb23-3"><a href="#cb23-3"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(playerid)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-4"><a href="#cb23-4"></a>  <span class="fu">mutate</span>(<span class="at">successfulCU =</span> <span class="fu">ifelse</span>(</span>
<span id="cb23-5"><a href="#cb23-5"></a>    (action_result <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"C"</span>,<span class="st">"S"</span>,<span class="st">"F"</span>)), <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="#cb23-6"></a>  <span class="fu">group_by</span>(playerid) <span class="sc">%&gt;%</span> </span>
<span id="cb23-7"><a href="#cb23-7"></a>  <span class="fu">mutate</span>(<span class="at">totalSSCU=</span><span class="fu">sum</span>(successfulCU)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-8"><a href="#cb23-8"></a>  <span class="fu">mutate</span>(<span class="at">percentSSCU=</span>totalSSCU <span class="sc">/</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-22_8fded7ccadba0fe983a26948c520e768">
<div class="cell-output-display">
<table data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">action_result</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ab_result</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">adj_h</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">successfulCU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">totalSSCU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">percentSSCU</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">\N</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.5</td>
</tr>
<tr class="even">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">B</td>
<td style="text-align: left;">\N</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.5</td>
</tr>
<tr class="odd">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">B</td>
<td style="text-align: left;">\N</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.5</td>
</tr>
<tr class="even">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">\N</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.5</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="solution-cont." class="slide level2">
<h2>Solution (cont.)</h2>
<ol type="1">
<li>Calculate successful curveball percentages</li>
<li>Look at some graphs to see what the data actually looks like now.</li>
</ol>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-23_ab596f53b8b7cff0fb7bb251ae4045f6">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>percentages <span class="ot">&lt;-</span> SScurve <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">distinct</span>(playerid, totalSSCU, percentSSCU)</span>
<span id="cb24-3"><a href="#cb24-3"></a></span>
<span id="cb24-4"><a href="#cb24-4"></a><span class="fu">ggplot</span>(<span class="at">data =</span> percentages) <span class="sc">+</span> </span>
<span id="cb24-5"><a href="#cb24-5"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> percentSSCU, <span class="at">y =</span> totalSSCU,</span>
<span id="cb24-6"><a href="#cb24-6"></a>                 <span class="at">colour =</span> playerid))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="3-dplyr_files/figure-html/unnamed-chunk-23-1.png" width="672" class="r-stretch"></section>
<section id="solution-cont.-1" class="slide level2">
<h2>Solution (cont.)</h2>
<p>Filter down to get the best pitchers with a minimum of 50 curveballs thrown (our median)</p>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-24_c3169473d7f3de84159d8d6a5fa727f6">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>percentages <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2"></a>  <span class="fu">filter</span>(totalSSCU <span class="sc">&gt;</span> <span class="dv">50</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(percentSSCU)) <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4"></a>   <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> percentSSCU, <span class="at">y =</span> totalSSCU, <span class="at">colour =</span> playerid))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="3-dplyr_files/figure-html/unnamed-chunk-24-1.png" width="672" class="r-stretch"></section>
<section id="your-turn-2" class="slide level2 inverse">
<h2>Your Turn</h2>
<p>The dataset <code>ChickWeight</code> is part of the core packages that come with R</p>
<p><strong>Hint</strong>: <code>data(ChickWeight)</code> gets the data into your active session.</p>
<p>From the help file:</p>
<blockquote>
<p>four groups of chicks on different protein diets. The body weights of the chicks were measured at birth and every second day thereafter until day 20. They were also measured on day 21.</p>
</blockquote>

<img data-src="http://www.kenaifeed.com/wp-content/uploads/2015/03/chicks.jpg" class="r-stretch quarto-figure-center"></section>
<section id="your-turn-3" class="slide level2 inverse">
<h2>Your Turn</h2>
<ol type="1">
<li><p>Create a line plot with each line representing the weight of each Chick</p></li>
<li><p>Focus on weight on day 21. Draw side-by-side dotplots of weight by diet.</p></li>
<li><p><strong>Bonus</strong>: Use <code>summarize</code> the average weight on day 21 under each diet. Overlay the dotplots by error bars around the average weight under each diet (see <code>?geom_errorbar</code>)</p></li>
</ol>
<p><strong>Hint</strong> for 1: check out <code>?group</code> and consider what varible or variables you might map to this option</p>
</section>
<section id="solution---q1" class="slide level2">
<h2>Solution - Q1</h2>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-25_fc2a5db30de102eba9f0d67dfeefd0fb">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>ChickWeight <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight, <span class="at">group=</span>Chick, <span class="at">color=</span>Diet)) <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb26-4"><a href="#cb26-4"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Diet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="3-dplyr_files/figure-html/unnamed-chunk-25-1.png" width="672" class="r-stretch"></section>
<section id="solution---q2" class="slide level2">
<h2>Solution - Q2</h2>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-26_6558b638a5a2c23073d7052b8df93513">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>ChickWeight <span class="sc">%&gt;%</span>   </span>
<span id="cb27-2"><a href="#cb27-2"></a>  <span class="fu">filter</span>(Time<span class="sc">==</span><span class="dv">21</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="#cb27-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Diet)) <span class="sc">+</span></span>
<span id="cb27-4"><a href="#cb27-4"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>weight, <span class="at">color=</span>Diet), <span class="at">size=</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="3-dplyr_files/figure-html/unnamed-chunk-26-1.png" width="672" class="r-stretch"></section>
<section id="solution---q3" class="slide level2">
<h2>Solution - Q3</h2>
<p>First, we need a separate dataset for the summary statistics:</p>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-27_7366e84c72d611202297487625e4ec3d">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>ChickW1 <span class="ot">&lt;-</span> ChickWeight <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="#cb28-2"></a>  <span class="fu">filter</span>(Time<span class="sc">==</span><span class="dv">21</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-3"><a href="#cb28-3"></a>  <span class="fu">group_by</span>(Diet) <span class="sc">%&gt;%</span> </span>
<span id="cb28-4"><a href="#cb28-4"></a>  <span class="fu">summarize</span>(<span class="at">mean_weight =</span> <span class="fu">mean</span>(weight, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb28-5"><a href="#cb28-5"></a>            <span class="at">sd_weight =</span> <span class="fu">sd</span>(weight, <span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="solution---q3-cont" class="slide level2">
<h2>Solution - Q3 (cont)</h2>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-28_17b490a635373b9ef7fa895d755ae275">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>ChickWeight <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2"></a>  <span class="fu">filter</span>(Time<span class="sc">==</span><span class="dv">21</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Diet)) <span class="sc">+</span></span>
<span id="cb29-4"><a href="#cb29-4"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>weight), <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb29-5"><a href="#cb29-5"></a>  <span class="fu">geom_errorbar</span>(<span class="at">data=</span> ChickW1, </span>
<span id="cb29-6"><a href="#cb29-6"></a>                <span class="fu">aes</span>(<span class="at">ymin =</span> mean_weight<span class="fl">-1.96</span><span class="sc">*</span>sd_weight, </span>
<span id="cb29-7"><a href="#cb29-7"></a>                    <span class="at">ymax =</span> mean_weight<span class="fl">+1.96</span><span class="sc">*</span>sd_weight, </span>
<span id="cb29-8"><a href="#cb29-8"></a>                    <span class="at">colour =</span> Diet), <span class="at">width=</span>.<span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb29-9"><a href="#cb29-9"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>ChickW1, <span class="fu">aes</span>(<span class="at">y=</span>mean_weight, <span class="at">color=</span>Diet), <span class="at">size=</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="3-dplyr_files/figure-html/unnamed-chunk-28-1.png" width="672" class="r-stretch"></section>
<section id="mutate-is-incredibly-flexible" class="slide level2">
<h2><code>Mutate</code> is incredibly flexible</h2>
<p>Consider a new variable <code>gain</code>, which gives the increase in weight of a chick since birth</p>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-29_4df950422610d53a43724f142122a39e">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>ChickPlus <span class="ot">&lt;-</span> ChickWeight <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="fu">group_by</span>(Chick) <span class="sc">%&gt;%</span> </span>
<span id="cb30-3"><a href="#cb30-3"></a>  <span class="fu">mutate</span>(<span class="at">gain =</span> weight <span class="sc">-</span> weight[Time <span class="sc">==</span> <span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-30_f293b5e46b89153a2dfa5431a541b9ce">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>ChickPlus <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2"></a>  <span class="fu">filter</span>(Chick <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="fu">select</span>(<span class="sc">-</span>Diet) <span class="sc">%&gt;%</span> </span>
<span id="cb31-4"><a href="#cb31-4"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 12
Columns: 4
Groups: Chick [1]
$ weight &lt;dbl&gt; 42, 51, 59, 64, 76, 93, 106, 125, 149, 171, 199, 205
$ Time   &lt;dbl&gt; 0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 21
$ Chick  &lt;ord&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1
$ gain   &lt;dbl&gt; 0, 9, 17, 22, 34, 51, 64, 83, 107, 129, 157, 163</code></pre>
</div>
</div>
</section>
<section id="plotting-weight-gain" class="slide level2">
<h2>Plotting weight gain</h2>
<div class="cell" data-hash="3-dplyr_cache/html/unnamed-chunk-31_47ed8298da4270e106bfaf2fc5e706a7">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>ChickPlus <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Time, <span class="at">y =</span> gain, <span class="at">group =</span> Chick)) <span class="sc">+</span> </span>
<span id="cb33-3"><a href="#cb33-3"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color=</span>Diet)) <span class="sc">+</span></span>
<span id="cb33-4"><a href="#cb33-4"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Diet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="3-dplyr_files/figure-html/unnamed-chunk-31-1.png" width="672" class="r-stretch"></section>
<section id="recap" class="slide level2">
<h2>Recap</h2>
<ul>
<li><p>Getting used to <code>dplyr</code> actions can take a bit of time and practice</p></li>
<li><p>Recognize keywords and match them to <code>dplyr</code> functions</p></li>
<li><p>Incorporate <code>dplyr</code> functions in your regular workflow - the long-term benefits are there, we promise!</p></li>
</ul>


<img data-src="images/dplyr.png" class="r-stretch quarto-figure-center"><div class="footer footer-default">
<p><a href="../../index.html">UNL R Workshops</a></p>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>