<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.540">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>UNL R Workshops - Data Wrangling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">UNL R Workshops</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../r-intro/index.html"> 
<span class="menu-text">Introduction to R</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../r-graphics/index.html"> 
<span class="menu-text">Graphics with ggplot2</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../r-format/index.html"> 
<span class="menu-text">Data Wrangling</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../r-modeling/index.html"> 
<span class="menu-text">Modeling</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#dplyr-terminology" id="toc-dplyr-terminology" class="nav-link active" data-scroll-target="#dplyr-terminology">dplyr terminology</a></li>
  <li><a href="#motivating-example-pipe-operator" id="toc-motivating-example-pipe-operator" class="nav-link" data-scroll-target="#motivating-example-pipe-operator">Motivating Example (Pipe Operator)</a></li>
  <li><a href="#the-pipe-operator" id="toc-the-pipe-operator" class="nav-link" data-scroll-target="#the-pipe-operator">The pipe operator <code>%&gt;%</code></a></li>
  <li><a href="#filter" id="toc-filter" class="nav-link" data-scroll-target="#filter">Filter</a></li>
  <li><a href="#filter-cont." id="toc-filter-cont." class="nav-link" data-scroll-target="#filter-cont.">Filter (cont.)</a></li>
  <li><a href="#your-turn-3-minutes" id="toc-your-turn-3-minutes" class="nav-link" data-scroll-target="#your-turn-3-minutes">Your Turn (~3 minutes)</a></li>
  <li><a href="#solution" id="toc-solution" class="nav-link" data-scroll-target="#solution">Solution</a></li>
  <li><a href="#arrange" id="toc-arrange" class="nav-link" data-scroll-target="#arrange">Arrange</a></li>
  <li><a href="#arrange-1" id="toc-arrange-1" class="nav-link" data-scroll-target="#arrange-1">Arrange</a></li>
  <li><a href="#your-turn" id="toc-your-turn" class="nav-link" data-scroll-target="#your-turn">Your Turn</a></li>
  <li><a href="#solution-1" id="toc-solution-1" class="nav-link" data-scroll-target="#solution-1">Solution</a></li>
  <li><a href="#select" id="toc-select" class="nav-link" data-scroll-target="#select">Select</a></li>
  <li><a href="#summarise" id="toc-summarise" class="nav-link" data-scroll-target="#summarise">Summarise</a></li>
  <li><a href="#summarise-and-group_by" id="toc-summarise-and-group_by" class="nav-link" data-scroll-target="#summarise-and-group_by"><code>summarise</code> and <code>group_by</code></a></li>
  <li><a href="#your-turn-1" id="toc-your-turn-1" class="nav-link" data-scroll-target="#your-turn-1">Your Turn</a></li>
  <li><a href="#a-solution" id="toc-a-solution" class="nav-link" data-scroll-target="#a-solution">A Solution</a></li>
  <li><a href="#mutate" id="toc-mutate" class="nav-link" data-scroll-target="#mutate"><code>mutate</code></a></li>
  <li><a href="#mutate-example" id="toc-mutate-example" class="nav-link" data-scroll-target="#mutate-example"><code>mutate</code> Example</a></li>
  <li><a href="#utilzing-ifelse" id="toc-utilzing-ifelse" class="nav-link" data-scroll-target="#utilzing-ifelse">Utilzing <code>ifelse</code></a></li>
  <li><a href="#caution-with-pipe-operator" id="toc-caution-with-pipe-operator" class="nav-link" data-scroll-target="#caution-with-pipe-operator">Caution with pipe operator</a></li>
  <li><a href="#reasons-for-pipe-operator-mishaps" id="toc-reasons-for-pipe-operator-mishaps" class="nav-link" data-scroll-target="#reasons-for-pipe-operator-mishaps">Reasons for pipe operator mishaps</a></li>
  <li><a href="#mutate-or-summarize" id="toc-mutate-or-summarize" class="nav-link" data-scroll-target="#mutate-or-summarize"><code>mutate</code> OR <code>summarize</code>?</a></li>
  <li><a href="#shortcuts" id="toc-shortcuts" class="nav-link" data-scroll-target="#shortcuts">Shortcuts</a></li>
  <li><a href="#your-turn-10-min" id="toc-your-turn-10-min" class="nav-link" data-scroll-target="#your-turn-10-min">Your Turn (10 min)</a></li>
  <li><a href="#one-solution" id="toc-one-solution" class="nav-link" data-scroll-target="#one-solution">One Solution</a></li>
  <li><a href="#solution-cont." id="toc-solution-cont." class="nav-link" data-scroll-target="#solution-cont.">Solution (cont.)</a></li>
  <li><a href="#solution-cont.-1" id="toc-solution-cont.-1" class="nav-link" data-scroll-target="#solution-cont.-1">Solution (cont.)</a></li>
  <li><a href="#your-turn-2" id="toc-your-turn-2" class="nav-link" data-scroll-target="#your-turn-2">Your Turn</a></li>
  <li><a href="#your-turn-3" id="toc-your-turn-3" class="nav-link" data-scroll-target="#your-turn-3">Your Turn</a></li>
  <li><a href="#solution---q1" id="toc-solution---q1" class="nav-link" data-scroll-target="#solution---q1">Solution - Q1</a></li>
  <li><a href="#solution---q2" id="toc-solution---q2" class="nav-link" data-scroll-target="#solution---q2">Solution - Q2</a></li>
  <li><a href="#solution---q3" id="toc-solution---q3" class="nav-link" data-scroll-target="#solution---q3">Solution - Q3</a></li>
  <li><a href="#solution---q3-cont" id="toc-solution---q3-cont" class="nav-link" data-scroll-target="#solution---q3-cont">Solution - Q3 (cont)</a></li>
  <li><a href="#mutate-is-incredibly-flexible" id="toc-mutate-is-incredibly-flexible" class="nav-link" data-scroll-target="#mutate-is-incredibly-flexible"><code>Mutate</code> is incredibly flexible</a></li>
  <li><a href="#plotting-weight-gain" id="toc-plotting-weight-gain" class="nav-link" data-scroll-target="#plotting-weight-gain">Plotting weight gain</a></li>
  <li><a href="#recap" id="toc-recap" class="nav-link" data-scroll-target="#recap">Recap</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="3-dplyr.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Wrangling</h1>
<p class="subtitle lead">Using dplyr</p>
</div>



<div class="quarto-title-meta column-page-left">

    
  
    
  </div>
  


</header>


<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/dplyr.png" class="img-fluid figure-img" width="580"></p>
<figcaption>Data Wrangling Cheat Sheet, by <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">RStudio</a></figcaption>
</figure>
</div>
<div class="notes">
<p>should already have this loaded if loaded all of tidyverse at the beginning</p>
</div>
<section id="dplyr-terminology" class="level2">
<h2 class="anchored" data-anchor-id="dplyr-terminology">dplyr terminology</h2>
<p>There are some of the primary <code>dplyr</code> <em>verbs</em>, representing distinct data analysis tasks:</p>
<ul>
<li><p><strong>Filter</strong>: Select specified rows of a data frame, produce subsets</p></li>
<li><p><strong>Arrange</strong>: Reorder the rows of a data frame</p></li>
<li><p><strong>Select</strong>: Select particular columns of a data frame</p></li>
<li><p><strong>Mutate</strong>: Add new or change existing columns of the data frame (as functions of existing columns)</p></li>
<li><p><strong>Summarise</strong>: Create collapsed summaries of a data frame</p></li>
<li><p><strong>Group By</strong>: Introduce structure to a data frame</p></li>
</ul>
</section>
<section id="motivating-example-pipe-operator" class="level2">
<h2 class="anchored" data-anchor-id="motivating-example-pipe-operator">Motivating Example (Pipe Operator)</h2>
<p>Use the pipe operator to combine dplyr functions in chain, which allows us to perform more complicated data manipulations</p>
<p>Syntax (Pipe dataframe as input into the dplyr function):</p>
<pre><code>dataframe %&gt;% dplyr_function()</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pipe_usage.png" class="img-fluid figure-img" width="480"></p>
<figcaption>Pipe Example, by <a href="https://www.sharpsightlabs.com/blog/dplyr-quick-introduction/">Sharp Sight Labs</a></figcaption>
</figure>
</div>
</section>
<section id="the-pipe-operator" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="the-pipe-operator">The pipe operator <code>%&gt;%</code></h2>
<p><code>f(x) %&gt;% g(y)</code> is equivalent to <code>g(f(x),y)</code></p>
<p>i.e.&nbsp;the output of one function is used as input to the next function. This function can be the identity</p>
<p>Consequences:</p>
<ul>
<li><code>x %&gt;% f(y)</code> is the same as <code>f(x,y)</code></li>
<li>statements of the form <code>k(h(g(f(x,y),z),u),v,w)</code> become <code>x %&gt;% f(y) %&gt;% g(z) %&gt;% h(u) %&gt;% k(v,w)</code></li>
<li>read <code>%&gt;%</code> as “then do”</li>
<li>in non-mathematical terms, the piping operator allows you to apply more than one different function at the same time to the same data frame.</li>
</ul>
</section>
<section id="filter" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="filter">Filter</h2>
<p>Read in the pitch data set. The data are from an experiment on different advanced metrics of MLB baseball pitchers different pitch types.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>pitch <span class="ot">&lt;-</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/unl-statistics/R-workshops/main/r-format/data/pitch.csv"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>pitch[<span class="sc">-</span><span class="dv">1</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pitcher_hand <span class="sc">==</span> <span class="st">"R"</span>, pitch_type <span class="sc">==</span> <span class="st">"CU"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n=</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pitcher_hand</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pitch_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">spin_rate</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ab_result</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">action_result</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">adj_h</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2795</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3000.024</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">2795</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3146.456</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3646</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3012.067</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">2795</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3026.256</td>
<td style="text-align: left;">HB</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><code>filter</code> is similar to the base function <code>subset</code></p>
</section>
<section id="filter-cont." class="level2">
<h2 class="anchored" data-anchor-id="filter-cont.">Filter (cont.)</h2>
<p>Multiple conditions in <code>filter</code> are combined with a logical AND (i.e.&nbsp;all conditions must be fulfilled)</p>
<p>e.g.&nbsp;</p>
<p><code>filter(pitcher_hand == "R", pitch_type == "CU")</code></p>
<p>Logical expressions can also be used</p>
<p>e.g.&nbsp;</p>
<p><code>filter(pitcher_hand == "R" &amp;  pitch_type == "CU")</code> or <code>filter(pitch_type == "CU" | subject == "KN")</code></p>
</section>
<section id="your-turn-3-minutes" class="level2 inverse">
<h2 class="inverse anchored" data-anchor-id="your-turn-3-minutes">Your Turn (~3 minutes)</h2>
<ol type="1">
<li><p>Use <code>filter</code> to get a subset of the <code>pitchdata</code> dataset</p></li>
<li><p>Ex. Filter the data down to left handed pitchers, who throw a curve with at least 3300 rpms (spin_rate)..</p></li>
<li><p><code>%&gt;%</code> the subset and create a plot</p></li>
</ol>
<p>hint: what is the default first argument of the <code>ggplot</code> function?</p>
</section>
<section id="solution" class="level2">
<h2 class="anchored" data-anchor-id="solution">Solution</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>pitch <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(spin_rate <span class="sc">&gt;=</span> <span class="dv">3200</span> <span class="sc">&amp;</span> pitcher_hand <span class="sc">==</span> <span class="st">"L"</span> <span class="sc">&amp;</span> pitch_type <span class="sc">==</span> <span class="st">"CU"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>action_result, <span class="at">y=</span>spin_rate)) <span class="sc">+</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span><span class="fu">as.factor</span>(playerid))) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="3-dplyr_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="arrange" class="level2">
<h2 class="anchored" data-anchor-id="arrange">Arrange</h2>
<p>Easy way to arrange your data in ascending or descending order</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>pitch <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="at">select =</span> <span class="fu">c</span>(<span class="st">"playerid"</span>, <span class="st">"spin_rate"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(playerid), spin_rate) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">spin_rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">16669</td>
<td style="text-align: right;">3055.508</td>
</tr>
<tr class="even">
<td style="text-align: right;">16669</td>
<td style="text-align: right;">3072.307</td>
</tr>
<tr class="odd">
<td style="text-align: right;">16669</td>
<td style="text-align: right;">3075.055</td>
</tr>
<tr class="even">
<td style="text-align: right;">16669</td>
<td style="text-align: right;">3164.546</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15686</td>
<td style="text-align: right;">3032.944</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="arrange-1" class="level2">
<h2 class="anchored" data-anchor-id="arrange-1">Arrange</h2>
<p>Successive variables are used for breaking ties from previous variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>pitch <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="at">select =</span> <span class="fu">c</span>(<span class="st">"playerid"</span>, <span class="st">"spin_rate"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(playerid, spin_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">spin_rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">476</td>
<td style="text-align: right;">3012.770</td>
</tr>
<tr class="even">
<td style="text-align: right;">476</td>
<td style="text-align: right;">3017.095</td>
</tr>
<tr class="odd">
<td style="text-align: right;">476</td>
<td style="text-align: right;">3024.533</td>
</tr>
<tr class="even">
<td style="text-align: right;">476</td>
<td style="text-align: right;">3028.328</td>
</tr>
<tr class="odd">
<td style="text-align: right;">476</td>
<td style="text-align: right;">3040.097</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="your-turn" class="level2 inverse">
<h2 class="inverse anchored" data-anchor-id="your-turn">Your Turn</h2>
<ol type="1">
<li><p>Look up the help file for the function <code>slice</code>.</p></li>
<li><p>Use <code>slice</code> on the arranged <code>pitchdata</code> dataset to select a single row</p></li>
<li><p>use <code>slice</code> to select multiple rows</p></li>
</ol>
<p>Hint: Use the entire data set</p>
</section>
<section id="solution-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="solution-1">Solution</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>pitch[<span class="sc">-</span><span class="dv">1</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(playerid), spin_rate) <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">11</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pitcher_hand</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pitch_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">spin_rate</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ab_result</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">action_result</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">adj_h</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">15540</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3041.712</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pitch[<span class="sc">-</span><span class="dv">1</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(playerid), spin_rate) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pitcher_hand</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pitch_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">spin_rate</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ab_result</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">action_result</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">adj_h</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3055.508</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">C</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3072.307</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3075.055</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3164.546</td>
<td style="text-align: left;">\N</td>
<td style="text-align: left;">C</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15686</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">CU</td>
<td style="text-align: right;">3032.944</td>
<td style="text-align: left;">K</td>
<td style="text-align: left;">S</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="select" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="select">Select</h2>
<ul>
<li>Using Select we are easily able to create a subset of our data. This is similar to the subset function in base.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>pitch <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(playerid, pitcher_hand, action_result, spin_rate) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pitcher_hand</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">action_result</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">spin_rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2795</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">3000.024</td>
</tr>
<tr class="even">
<td style="text-align: right;">959</td>
<td style="text-align: left;">L</td>
<td style="text-align: left;">C</td>
<td style="text-align: right;">3051.596</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2795</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">3146.456</td>
</tr>
<tr class="even">
<td style="text-align: right;">3646</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">3012.067</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2795</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">3026.256</td>
</tr>
<tr class="even">
<td style="text-align: right;">2795</td>
<td style="text-align: left;">L</td>
<td style="text-align: left;">B</td>
<td style="text-align: right;">3038.633</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="summarise" class="level2">
<h2 class="anchored" data-anchor-id="summarise">Summarise</h2>
<ul>
<li>Finding summary statistics of a metric</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#na.rm - remove NAs from calculation</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>pitch <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean_spinrate =</span> <span class="fu">mean</span>(spin_rate, <span class="at">na.rm=</span><span class="cn">TRUE</span>), </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">sd_spinrate =</span> <span class="fu">sd</span>(spin_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_spinrate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sd_spinrate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3125.67</td>
<td style="text-align: right;">109.8614</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="summarise-and-group_by" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="summarise-and-group_by"><code>summarise</code> and <code>group_by</code></h2>
<ul>
<li>Finding summary statistics of a metric after accounting first for other variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>pitch <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(playerid) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean_spinrate =</span> <span class="fu">mean</span>(spin_rate, <span class="at">na.rm=</span><span class="cn">TRUE</span>), </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">sd_spinrate =</span> <span class="fu">sd</span>(spin_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_spinrate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sd_spinrate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">476</td>
<td style="text-align: right;">3065.601</td>
<td style="text-align: right;">44.64957</td>
</tr>
<tr class="even">
<td style="text-align: right;">607</td>
<td style="text-align: right;">3278.486</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">657</td>
<td style="text-align: right;">3042.489</td>
<td style="text-align: right;">43.01146</td>
</tr>
<tr class="even">
<td style="text-align: right;">959</td>
<td style="text-align: right;">3056.323</td>
<td style="text-align: right;">42.85757</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1030</td>
<td style="text-align: right;">3044.114</td>
<td style="text-align: right;">37.69737</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="your-turn-1" class="level2 inverse">
<h2 class="inverse anchored" data-anchor-id="your-turn-1">Your Turn</h2>
<ol type="1">
<li><p>Select only playerid, spin_rate, and action result</p></li>
<li><p>Group by both playerid and action result and find mean and sd of spin rates</p></li>
<li><p><code>%&gt;%</code> the summaries into a <code>ggplot</code> histogram</p></li>
</ol>
</section>
<section id="a-solution" class="level2">
<h2 class="anchored" data-anchor-id="a-solution">A Solution</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>pitch <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(playerid, spin_rate, action_result) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(playerid, action_result) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean_spin =</span> <span class="fu">mean</span>(spin_rate), </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">sd_spin =</span> <span class="fu">sd</span>(spin_rate)) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mean_spin)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="3-dplyr_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mutate" class="level2">
<h2 class="anchored" data-anchor-id="mutate"><code>mutate</code></h2>
<ul>
<li><p>Change an existing or create a new variable into the data</p></li>
<li><p>Creating a new column in your data set that represents something new</p></li>
<li><p>Great for calculations</p></li>
<li><p>How would I create a calculation for how far above or below each players pitches are from their own average spin rates?</p></li>
</ul>
</section>
<section id="mutate-example" class="level2">
<h2 class="anchored" data-anchor-id="mutate-example"><code>mutate</code> Example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>pitch <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(playerid, spin_rate, action_result) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(playerid, action_result) <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean_spin =</span> <span class="fu">mean</span>(spin_rate), </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">sd_spin =</span> <span class="fu">sd</span>(spin_rate)) <span class="sc">%&gt;%</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">mean =</span> <span class="fu">sum</span>(mean_spin) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">difference =</span> mean <span class="sc">-</span> mean_spin) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
# Groups:   playerid [3]
  playerid action_result mean_spin sd_spin  mean difference
     &lt;dbl&gt; &lt;chr&gt;             &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
1      476 B                 3077.   52.1  3058.      -19.1
2      476 F                 3101.    1.69 3058.      -43.4
3      476 S                 3041.   17.0  3058.       17.2
4      476 X                 3013.   NA    3058.       45.3
5      607 B                 3278.   NA    3278.        0  
6      657 B                 3047.   46.2  3036.      -11.2</code></pre>
</div>
</div>
</section>
<section id="utilzing-ifelse" class="level2">
<h2 class="anchored" data-anchor-id="utilzing-ifelse">Utilzing <code>ifelse</code></h2>
<ul>
<li><p>Sometimes you are tasked to create a new column based on a clause</p></li>
<li><p><code>ifelse</code> function allows you to create an if else statement within the creation of the new variable.</p></li>
<li><p>Consider rewriting the handedness of our pitchers.</p></li>
<li><p>If the pitcher_hand is R write “Right” if not, “Left”</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>pitch <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(pitcher_hand) <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Handedness =</span> <span class="fu">ifelse</span>(pitcher_hand <span class="sc">==</span> <span class="st">"R"</span>, <span class="st">"Right"</span>, <span class="st">"Left"</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  pitcher_hand Handedness
  &lt;chr&gt;        &lt;chr&gt;     
1 R            Right     
2 L            Left      
3 R            Right     
4 R            Right     
5 R            Right     
6 L            Left      </code></pre>
</div>
</div>
</section>
<section id="caution-with-pipe-operator" class="level2">
<h2 class="anchored" data-anchor-id="caution-with-pipe-operator">Caution with pipe operator</h2>
<p>Why does <code>pitch$mean_spin</code> not return a real-valued summary??</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>pitch<span class="sc">$</span>mean_spin</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Columns in our dataset</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(pitch[,<span class="sc">-</span><span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "playerid"      "pitcher_hand"  "pitch_type"    "spin_rate"    
[5] "ab_result"     "action_result" "adj_h"        </code></pre>
</div>
</div>
</section>
<section id="reasons-for-pipe-operator-mishaps" class="level2">
<h2 class="anchored" data-anchor-id="reasons-for-pipe-operator-mishaps">Reasons for pipe operator mishaps</h2>
<ul>
<li><p>When we use the piping operator like we have been, the data is only ever being changed within the sequence</p></li>
<li><p>We only ever look at this new variable in the previous chunk.</p></li>
<li><p>It has not been created globally into the dataset itself</p></li>
<li><p>To do this, you need to create your new column by declaring it as its own variable.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>pitch<span class="sc">$</span>mean_spin <span class="ot">&lt;-</span> <span class="fu">mean</span>(pitch<span class="sc">$</span>spin_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="mutate-or-summarize" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="mutate-or-summarize"><code>mutate</code> OR <code>summarize</code>?</h2>
<p>Both commands introduce new variables - so which one should we use?</p>
<div class="columns">
<div class="column">
<p><code>mutate</code></p>
<ul>
<li><p><strong>adds variables</strong> to the existing data set</p></li>
<li><p>The resulting variables must have the <strong>same length</strong> as the original data</p></li>
<li><p>e.g.&nbsp;use for transformations, combinations of multiple variables</p></li>
</ul>
</div><div class="column">
<p><code>summarize</code></p>
<ul>
<li><p><strong>creates aggregates</strong> of the original data</p></li>
<li><p>The number of rows of the new dataset is determined by the number of combinations of the grouping structure.</p></li>
<li><p>The number of columns is determined by the number of grouping variables and the summary statistics.</p></li>
</ul>
</div>
</div>
</section>
<section id="shortcuts" class="level2">
<h2 class="anchored" data-anchor-id="shortcuts">Shortcuts</h2>
<p><code>summarize(n = n())</code> is equivalent to <code>tally()</code> (Number of unique rows in dataset)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>pitch <span class="sc">%&gt;%</span> <span class="fu">tally</span>()</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>pitch <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Number of unique observations in each group</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>pitch <span class="sc">%&gt;%</span> <span class="fu">count</span>(playerid, action_result)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>pitch <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(playerid, action_result) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>())</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>pitch <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(playerid, action_result) <span class="sc">%&gt;%</span> <span class="fu">tally</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="your-turn-10-min" class="level2 inverse">
<h2 class="inverse anchored" data-anchor-id="your-turn-10-min">Your Turn (10 min)</h2>
<p>Based on your (limited) knowledge of baseball, you determine what is a “successful” curveball. Then determine what pitchers pitched the most successful curveballs!</p>
<p>Note: There are many different ways of answering this question. None are wrong and you don’t need to know anything about baseball to try. Consider criteria that it needs to meet.</p>
<p>Ex. A successful curveball needs to be above 90 mph in velocity and have over 3100 rpms in spin rate.</p>
<p>utilize the <code>sum()</code> function to add up all your curveballs!</p>
</section>
<section id="one-solution" class="level2">
<h2 class="anchored" data-anchor-id="one-solution">One Solution</h2>
<p>Consider a success as any strike (S), catch (C), and foul ball (F)</p>
<!--and any batted ball resulting in a "adj_h" less than the league average of .300 BABIP (according to MLB.com) -->
<div class="cell" data-figure.width="1">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>SScurve <span class="ot">&lt;-</span> pitch <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">"playerid"</span>, <span class="st">"action_result"</span>, <span class="st">"ab_result"</span>, <span class="st">"adj_h"</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(playerid)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">successfulCU =</span> <span class="fu">ifelse</span>(</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    (action_result <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"C"</span>,<span class="st">"S"</span>,<span class="st">"F"</span>)), <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(playerid) <span class="sc">%&gt;%</span> </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">totalSSCU=</span><span class="fu">sum</span>(successfulCU)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentSSCU=</span>totalSSCU <span class="sc">/</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">playerid</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">action_result</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">ab_result</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">adj_h</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">successfulCU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">totalSSCU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">percentSSCU</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">\N</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.5</td>
</tr>
<tr class="even">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">B</td>
<td style="text-align: left;">\N</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.5</td>
</tr>
<tr class="odd">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">B</td>
<td style="text-align: left;">\N</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.5</td>
</tr>
<tr class="even">
<td style="text-align: right;">16669</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">\N</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.5</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="solution-cont." class="level2">
<h2 class="anchored" data-anchor-id="solution-cont.">Solution (cont.)</h2>
<ol type="1">
<li>Calculate successful curveball percentages</li>
<li>Look at some graphs to see what the data actually looks like now.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>percentages <span class="ot">&lt;-</span> SScurve <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(playerid, totalSSCU, percentSSCU)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> percentages) <span class="sc">+</span> </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> percentSSCU, <span class="at">y =</span> totalSSCU,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">colour =</span> playerid))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="3-dplyr_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="solution-cont.-1" class="level2">
<h2 class="anchored" data-anchor-id="solution-cont.-1">Solution (cont.)</h2>
<p>Filter down to get the best pitchers with a minimum of 50 curveballs thrown (our median)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>percentages <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(totalSSCU <span class="sc">&gt;</span> <span class="dv">50</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(percentSSCU)) <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> percentSSCU, <span class="at">y =</span> totalSSCU, <span class="at">colour =</span> playerid))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="3-dplyr_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="your-turn-2" class="level2 inverse">
<h2 class="inverse anchored" data-anchor-id="your-turn-2">Your Turn</h2>
<p>The dataset <code>ChickWeight</code> is part of the core packages that come with R</p>
<p><strong>Hint</strong>: <code>data(ChickWeight)</code> gets the data into your active session.</p>
<p>From the help file:</p>
<blockquote class="blockquote">
<p>four groups of chicks on different protein diets. The body weights of the chicks were measured at birth and every second day thereafter until day 20. They were also measured on day 21.</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="http://www.kenaifeed.com/wp-content/uploads/2015/03/chicks.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
<section id="your-turn-3" class="level2 inverse">
<h2 class="inverse anchored" data-anchor-id="your-turn-3">Your Turn</h2>
<ol type="1">
<li><p>Create a line plot with each line representing the weight of each Chick</p></li>
<li><p>Focus on weight on day 21. Draw side-by-side dotplots of weight by diet.</p></li>
<li><p><strong>Bonus</strong>: Use <code>summarize</code> the average weight on day 21 under each diet. Overlay the dotplots by error bars around the average weight under each diet (see <code>?geom_errorbar</code>)</p></li>
</ol>
<p><strong>Hint</strong> for 1: check out <code>?group</code> and consider what varible or variables you might map to this option</p>
</section>
<section id="solution---q1" class="level2">
<h2 class="anchored" data-anchor-id="solution---q1">Solution - Q1</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>ChickWeight <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Time, <span class="at">y=</span>weight, <span class="at">group=</span>Chick, <span class="at">color=</span>Diet)) <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Diet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="3-dplyr_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="solution---q2" class="level2">
<h2 class="anchored" data-anchor-id="solution---q2">Solution - Q2</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>ChickWeight <span class="sc">%&gt;%</span>   </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Time<span class="sc">==</span><span class="dv">21</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Diet)) <span class="sc">+</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>weight, <span class="at">color=</span>Diet), <span class="at">size=</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="3-dplyr_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="solution---q3" class="level2">
<h2 class="anchored" data-anchor-id="solution---q3">Solution - Q3</h2>
<p>First, we need a separate dataset for the summary statistics:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>ChickW1 <span class="ot">&lt;-</span> ChickWeight <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Time<span class="sc">==</span><span class="dv">21</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Diet) <span class="sc">%&gt;%</span> </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_weight =</span> <span class="fu">mean</span>(weight, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd_weight =</span> <span class="fu">sd</span>(weight, <span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="solution---q3-cont" class="level2">
<h2 class="anchored" data-anchor-id="solution---q3-cont">Solution - Q3 (cont)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>ChickWeight <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Time<span class="sc">==</span><span class="dv">21</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Diet)) <span class="sc">+</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>weight), <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">data=</span> ChickW1, </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">ymin =</span> mean_weight<span class="fl">-1.96</span><span class="sc">*</span>sd_weight, </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ymax =</span> mean_weight<span class="fl">+1.96</span><span class="sc">*</span>sd_weight, </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>                    <span class="at">colour =</span> Diet), <span class="at">width=</span>.<span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>ChickW1, <span class="fu">aes</span>(<span class="at">y=</span>mean_weight, <span class="at">color=</span>Diet), <span class="at">size=</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="3-dplyr_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mutate-is-incredibly-flexible" class="level2">
<h2 class="anchored" data-anchor-id="mutate-is-incredibly-flexible"><code>Mutate</code> is incredibly flexible</h2>
<p>Consider a new variable <code>gain</code>, which gives the increase in weight of a chick since birth</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>ChickPlus <span class="ot">&lt;-</span> ChickWeight <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Chick) <span class="sc">%&gt;%</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gain =</span> weight <span class="sc">-</span> weight[Time <span class="sc">==</span> <span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>ChickPlus <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Chick <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Diet) <span class="sc">%&gt;%</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 12
Columns: 4
Groups: Chick [1]
$ weight &lt;dbl&gt; 42, 51, 59, 64, 76, 93, 106, 125, 149, 171, 199, 205
$ Time   &lt;dbl&gt; 0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 21
$ Chick  &lt;ord&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1
$ gain   &lt;dbl&gt; 0, 9, 17, 22, 34, 51, 64, 83, 107, 129, 157, 163</code></pre>
</div>
</div>
</section>
<section id="plotting-weight-gain" class="level2">
<h2 class="anchored" data-anchor-id="plotting-weight-gain">Plotting weight gain</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>ChickPlus <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Time, <span class="at">y =</span> gain, <span class="at">group =</span> Chick)) <span class="sc">+</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color=</span>Diet)) <span class="sc">+</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Diet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="3-dplyr_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="recap" class="level2">
<h2 class="anchored" data-anchor-id="recap">Recap</h2>
<ul>
<li><p>Getting used to <code>dplyr</code> actions can take a bit of time and practice</p></li>
<li><p>Recognize keywords and match them to <code>dplyr</code> functions</p></li>
<li><p>Incorporate <code>dplyr</code> functions in your regular workflow - the long-term benefits are there, we promise!</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/dplyr.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>