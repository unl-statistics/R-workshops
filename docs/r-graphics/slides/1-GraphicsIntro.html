<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.540">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>UNL R Workshops - Data Visualization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">UNL R Workshops</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../r-intro/index.html"> 
<span class="menu-text">Introduction to R</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../r-graphics/index.html"> 
<span class="menu-text">Graphics with ggplot2</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../r-format/index.html"> 
<span class="menu-text">Data Wrangling</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../r-modeling/index.html"> 
<span class="menu-text">Modeling</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#todays-outline" id="toc-todays-outline" class="nav-link active" data-scroll-target="#todays-outline">Today’s Outline</a>
  <ul class="collapse">
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  </ul></li>
  <li><a href="#motivation" id="toc-motivation" class="nav-link" data-scroll-target="#motivation">MOTIVATION</a>
  <ul class="collapse">
  <li><a href="#why-visualize" id="toc-why-visualize" class="nav-link" data-scroll-target="#why-visualize">Why visualize?</a></li>
  <li><a href="#tables-and-lists-vs.-charts-and-graphs" id="toc-tables-and-lists-vs.-charts-and-graphs" class="nav-link" data-scroll-target="#tables-and-lists-vs.-charts-and-graphs">Tables and lists vs.&nbsp;Charts and graphs</a></li>
  <li><a href="#tables-and-lists-vs.-charts-and-graphs-1" id="toc-tables-and-lists-vs.-charts-and-graphs-1" class="nav-link" data-scroll-target="#tables-and-lists-vs.-charts-and-graphs-1">Tables and lists vs.&nbsp;Charts and graphs</a></li>
  <li><a href="#tables-and-lists-vs.-charts-and-graphs-2" id="toc-tables-and-lists-vs.-charts-and-graphs-2" class="nav-link" data-scroll-target="#tables-and-lists-vs.-charts-and-graphs-2">Tables and lists vs.&nbsp;Charts and graphs</a></li>
  </ul></li>
  <li><a href="#types-of-graphs" id="toc-types-of-graphs" class="nav-link" data-scroll-target="#types-of-graphs">Types of Graphs</a>
  <ul class="collapse">
  <li><a href="#beginner" id="toc-beginner" class="nav-link" data-scroll-target="#beginner">Beginner</a></li>
  <li><a href="#intermediate" id="toc-intermediate" class="nav-link" data-scroll-target="#intermediate">Intermediate</a></li>
  <li><a href="#advanced" id="toc-advanced" class="nav-link" data-scroll-target="#advanced">Advanced</a></li>
  </ul></li>
  <li><a href="#grammar-of-graphics" id="toc-grammar-of-graphics" class="nav-link" data-scroll-target="#grammar-of-graphics">Grammar of Graphics</a>
  <ul class="collapse">
  <li><a href="#grammar-of-graphics-1" id="toc-grammar-of-graphics-1" class="nav-link" data-scroll-target="#grammar-of-graphics-1">Grammar of Graphics</a></li>
  <li><a href="#grammar-of-graphics-2" id="toc-grammar-of-graphics-2" class="nav-link" data-scroll-target="#grammar-of-graphics-2">Grammar of Graphics</a></li>
  <li><a href="#grammar-of-graphics-3" id="toc-grammar-of-graphics-3" class="nav-link" data-scroll-target="#grammar-of-graphics-3">Grammar of Graphics</a></li>
  <li><a href="#limitations" id="toc-limitations" class="nav-link" data-scroll-target="#limitations">Limitations</a></li>
  </ul></li>
  <li><a href="#ggplot2" id="toc-ggplot2" class="nav-link" data-scroll-target="#ggplot2">ggplot2</a>
  <ul class="collapse">
  <li><a href="#a-layered-grammar-of-graphics" id="toc-a-layered-grammar-of-graphics" class="nav-link" data-scroll-target="#a-layered-grammar-of-graphics">A layered grammar of graphics</a></li>
  <li><a href="#a-layered-grammar-vs-the-grammar-of-graphics" id="toc-a-layered-grammar-vs-the-grammar-of-graphics" class="nav-link" data-scroll-target="#a-layered-grammar-vs-the-grammar-of-graphics">A layered grammar vs The Grammar of Graphics</a></li>
  <li><a href="#what-is-a-graphic" id="toc-what-is-a-graphic" class="nav-link" data-scroll-target="#what-is-a-graphic">What is a graphic?</a></li>
  <li><a href="#ggplot2-a-layered-grammar" id="toc-ggplot2-a-layered-grammar" class="nav-link" data-scroll-target="#ggplot2-a-layered-grammar">ggplot2: A layered grammar</a></li>
  <li><a href="#what-is-a-layer" id="toc-what-is-a-layer" class="nav-link" data-scroll-target="#what-is-a-layer">What is a Layer?</a></li>
  <li><a href="#ggplot2-specifications" id="toc-ggplot2-specifications" class="nav-link" data-scroll-target="#ggplot2-specifications">ggplot2: Specifications</a></li>
  <li><a href="#ggplot2-a-layered-grammar-1" id="toc-ggplot2-a-layered-grammar-1" class="nav-link" data-scroll-target="#ggplot2-a-layered-grammar-1">ggplot2: A layered grammar</a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"></a></li>
  </ul></li>
  <li><a href="#make-your-first-figure" id="toc-make-your-first-figure" class="nav-link" data-scroll-target="#make-your-first-figure">Make your first figure</a>
  <ul class="collapse">
  <li><a href="#r-package-and-data-set" id="toc-r-package-and-data-set" class="nav-link" data-scroll-target="#r-package-and-data-set">R package and data set</a></li>
  <li><a href="#begin-with-the-data" id="toc-begin-with-the-data" class="nav-link" data-scroll-target="#begin-with-the-data">Begin with the data</a></li>
  <li><a href="#then-specify-aesthetic-mappings" id="toc-then-specify-aesthetic-mappings" class="nav-link" data-scroll-target="#then-specify-aesthetic-mappings">Then specify aesthetic mappings</a></li>
  <li><a href="#choose-a-geom" id="toc-choose-a-geom" class="nav-link" data-scroll-target="#choose-a-geom">Choose a geom</a></li>
  <li><a href="#add-geom-specific-aesthetics" id="toc-add-geom-specific-aesthetics" class="nav-link" data-scroll-target="#add-geom-specific-aesthetics">Add geom-specific aesthetics</a></li>
  <li><a href="#add-another-layer" id="toc-add-another-layer" class="nav-link" data-scroll-target="#add-another-layer">Add another layer…</a></li>
  <li><a href="#mapping-vs-setting-aesthetics" id="toc-mapping-vs-setting-aesthetics" class="nav-link" data-scroll-target="#mapping-vs-setting-aesthetics">Mapping vs setting aesthetics</a></li>
  <li><a href="#specify-coordinate-transformations" id="toc-specify-coordinate-transformations" class="nav-link" data-scroll-target="#specify-coordinate-transformations">Specify Coordinate transformations</a></li>
  <li><a href="#add-nuance-with-facets" id="toc-add-nuance-with-facets" class="nav-link" data-scroll-target="#add-nuance-with-facets">Add nuance with facets</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="1-GraphicsIntro.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Visualization</h1>
<p class="subtitle lead">Using ggplot2</p>
</div>



<div class="quarto-title-meta column-page-left">

    
  
    
  </div>
  


</header>


<section id="todays-outline" class="level1 inverse smaller">
<h1 class="inverse smaller">Today’s Outline</h1>
<p>BASICS<br>
1. Why is data visualization important?<br>
2. Data Types, Formats, and Structures<br>
3. Formatting your data: A tidy data discussion</p>
<p>BUILDING PLOTS<br>
1. Geoms, Stats, Coordinates, and Faceting</p>
<p>PERCEPTION<br>
1. Basics of cognitive visual perception<br>
2. What makes a good graphic?<br>
3. Aesthetics and scales in ’ggplot2‘</p>
<p>POLISHING PLOTS<br>
1. Setting themes<br>
2. Modifying elements of a plot<br>
3. Making plots interactive!<br>
4. Saving your work</p>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"></h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/r_rollercoaster.png" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="An illustrated cartoon graph with “How much I think I know about R” on the y-axis, with axis labels at “I know nothing” and “I know lots”, versus “time” on the x-axis. The line varies widely between the two. Above the line are emoji-like faces, showing uncertainty and hope early on. At a second peak is the label “join R community on twitter”, with a “mind-blown” emoji face. The line quickly descends, but with a happy looking emoji character sliding down it." width="900"></p>
<figcaption>R knowledge rollercoaster, by <a href="https://www.allisonhorst.com/">Allison Horst</a></figcaption>
</figure>
</div>
</section>
</section>
<section id="motivation" class="level1">
<h1>MOTIVATION</h1>
<section id="why-visualize" class="level2">
<h2 class="anchored" data-anchor-id="why-visualize">Why visualize?</h2>
<p>What are graphics useful for? + Data cleaning + Exploring data structure + Communicating Information</p>
<p>Visualization offers an alternative way of communicating numbers</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Minard.png" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="Charles Minard's visualization of the size of Napoleon's army over time and space." width="600"></p>
<figcaption><a href="https://en.wikipedia.org/wiki/Charles_Joseph_Minard">Napoleon March Map</a> by Charles Joseph Minard</figcaption>
</figure>
</div>
<div class="notes">
<p>One of the main reasons for visualization is to communicate information.</p>
<p>In 1812, Napoleon marched to Moscow in order to conquer the city. It was a disaster: having started with around 470,000 soldiers, he returned with just 10,000. This chart tells the story of that campaign and has become one of the most famous visualizations of all time. The map details the out-and-back journey of Napoleon’s troops. The width of the line represents the total number of soldiers and the color represents the direction (yellow for towards Moscow, black for the return trip). Below the central visualization is also a simple temperature line graph illustrating the rapidly dropping winter cold. It is effective, detailed, and paints a staggering picture of the journey’s devastation.</p>
</div>
</section>
<section id="tables-and-lists-vs.-charts-and-graphs" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="tables-and-lists-vs.-charts-and-graphs">Tables and lists vs.&nbsp;Charts and graphs</h2>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">Sepal.Length</th>
<th style="text-align: right;">Sepal.Width</th>
<th style="text-align: right;">Petal.Length</th>
<th style="text-align: right;">Petal.Width</th>
<th style="text-align: left;">Species</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5.1</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.7</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">1.3</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="even">
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">3.3</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: left;">setosa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7.0</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">4.7</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: left;">versicolor</td>
</tr>
<tr class="even">
<td style="text-align: right;">6.4</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">4.5</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: left;">versicolor</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6.9</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: left;">versicolor</td>
</tr>
<tr class="even">
<td style="text-align: right;">5.7</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">4.1</td>
<td style="text-align: right;">1.3</td>
<td style="text-align: left;">versicolor</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6.3</td>
<td style="text-align: right;">3.3</td>
<td style="text-align: right;">6.0</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: left;">virginica</td>
</tr>
<tr class="even">
<td style="text-align: right;">5.8</td>
<td style="text-align: right;">2.7</td>
<td style="text-align: right;">5.1</td>
<td style="text-align: right;">1.9</td>
<td style="text-align: left;">virginica</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7.1</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">5.9</td>
<td style="text-align: right;">2.1</td>
<td style="text-align: left;">virginica</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="notes">
<p><strong>Consider this thought experiment:</strong> You have a simple data set - 2 variables, 500 observations. You want to get a sense of how the variables relate to each other. You can do one of the following options:</p>
<ol type="1">
<li>Print out the data set</li>
<li>Create some summary statistics of each variable and perhaps the covariance between the two variables</li>
<li>Draw a scatter plot of the two variables</li>
</ol>
<p>Which one would you rather use? Why?</p>
<p>Here we see the iris data set in table format - contains measurements (sepal length, sepal width, petal length, and petal width) about 3 different iris species. Looking at the table, we can not easily process the relationship between the measurements and species.</p>
</div>
</section>
<section id="tables-and-lists-vs.-charts-and-graphs-1" class="level2">
<h2 class="anchored" data-anchor-id="tables-and-lists-vs.-charts-and-graphs-1">Tables and lists vs.&nbsp;Charts and graphs</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/table-modified.png" class="img-fluid figure-img" alt="Modified table" width="680"></p>
<figcaption>Modified Table</figcaption>
</figure>
</div>
<div class="notes">
<p>One way to explore this relationship is to display the information in the data set in a graphical format. Here we assign different variables in the data set to certain attributes on the chart. For example, we might plot the sepal length and width on the x and y axes respectively and then color the points by the species.</p>
</div>
</section>
<section id="tables-and-lists-vs.-charts-and-graphs-2" class="level2">
<h2 class="anchored" data-anchor-id="tables-and-lists-vs.-charts-and-graphs-2">Tables and lists vs.&nbsp;Charts and graphs</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="1-GraphicsIntro_files/figure-html/motivating-example-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>Visualizations can aid communication and make the data easier to perceive</p>
<div class="notes">
<p>We can now process and understand the relationship between the sepal size and species through graphical format. We can now clearly see that the setosa species (red) has a short sepal length with a long sepal width while the versicolor and virginica generally have both short or both long sepal widths and lengths resepectively.</p>
</div>
</section>
</section>
<section id="types-of-graphs" class="level1 inverse">
<h1 class="inverse">Types of Graphs</h1>
<ul>
<li><p><a href="https://datavizproject.com/">The Data Vis Project</a></p></li>
<li><p><a href="https://datavizcatalogue.com/">Data Visualization Catalogue</a></p></li>
</ul>
<div class="notes">
<p>It is useful to know of the different types of graphs out there. These two links, also found on the workshop webpage provide a resource for selecting the appropriate chart for your data.</p>
</div>
<section id="beginner" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="beginner">Beginner</h2>
<div class="columns">
<div class="column">
<p><strong>One Variable</strong><br>
- Discrete<br>
- Bar Chart<br>
- Pie Chart</p>
<ul>
<li>Continuous
<ul>
<li>Stem and Leaf Plots</li>
<li>Box and Whisker Plots</li>
<li>Histograms</li>
</ul></li>
</ul>
</div><div class="column">
<p><strong>Two variables</strong><br>
- Continuous X, Continuous Y<br>
- Scatterplots</p>
<ul>
<li>Maps</li>
</ul>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="1-GraphicsIntro_files/figure-html/beginner-plots-1.png" class="img-fluid figure-img" data-fig-pos="center" width="1920"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<p>Here are some common charts most often seen. A bar chart or pie cart are used for displaying information about one discrete variable (count, proporton, mean for that group, etc.). Stem and Leaf Plots, Box and Whisker Plots, and Histograms are all useful for understanding the distribution of a single continuous variable. Scatterplots are a simple and effective way of understanding the relationship between two continuous variables and Maps can help us understand the spatial relationship between spatial information.</p>
</div>
</section>
<section id="intermediate" class="level2">
<h2 class="anchored" data-anchor-id="intermediate">Intermediate</h2>
<ul>
<li>Parallel Coordinate Plots</li>
<li>Mosaic Plots</li>
<li>Radar Charts</li>
<li>Heat Maps</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="1-GraphicsIntro_files/figure-html/intermediate-plots-1.png" class="img-fluid figure-img" data-fig-pos="center" width="1920"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<p>There are many other kinds of plots that can be useful for exploring relationships of variables. Parallel Coordinate plots (quantitative - discrete) each row in a data set as a line or profile across the columns/variables in the data set. Mosaic plots are useful for visualizing the relationship between two discrete variables. Radar Charts are equivalent to parallel coordinate plots with the axes arranged in polar coordinates. Heat maps are useful for communicating 3D information by showing the magnitude of a phenomenon as color in two dimensions.</p>
</div>
</section>
<section id="advanced" class="level2">
<h2 class="anchored" data-anchor-id="advanced">Advanced</h2>
<ul>
<li>Density Plots</li>
<li>Violin Plots</li>
<li>Social Network Plots</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="1-GraphicsIntro_files/figure-html/advanced-plots-1.png" class="img-fluid figure-img" data-fig-pos="center" width="1728"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<p>Density and Volin plots help us explore the distribution of different variables. Social Network Plots help you investigate social structures through the use of networks and graph theory.</p>
</div>
</section>
</section>
<section id="grammar-of-graphics" class="level1 inverse">
<h1 class="inverse">Grammar of Graphics</h1>
<section id="grammar-of-graphics-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="grammar-of-graphics-1">Grammar of Graphics</h2>
<p>What is the <a href="https://link.springer.com/book/10.1007/0-387-28695-0">grammar of graphics</a>?</p>
<ul>
<li><p>Developed by Leland Wilkinson, is a set of grammatical rules for creating perceivable graphs</p></li>
<li><p>Rather than thinking about a limited set of graphs, think about graphical forms</p></li>
<li><p>Charts are instances of much more general objects</p></li>
<li><p>An abstraction which makes thinking, reasoning, and communicating graphics easier</p></li>
</ul>
<p><img src="images/grammar.png" class="img-fluid"></p>
<div class="notes">
<p>We often talk about types of graphs – bar plots, pie charts, scatterplots – as though they are unrelated, but most graphs share many aspects of their structure.</p>
<p>We can think of graphs as visual representations of (possibly transformed) data, along with labels (like axes and legends) that make the meaning clear.</p>
<p>Much like the grammar of a language allows you to combine words into meaningful sentences, a grammar of graphics provides a structure to combine graphical elements into figures that display data in a meaningful way.</p>
<p>The grammar of graphics was developed in order to produce a flexible system that can create a rich variety of charts as simply as possible, without duplication of methods.</p>
<p>A grammar provides a strong foundation for understanding a diverse range of graphics. A grammar may also help guide us on what a well-formed or correct graphic looks like, but there will still be many grammatically correct but nonsensical graphics</p>
<p>Graphics are viewed as a mapping <strong>from variables</strong> in the data set <strong>to visual attributes</strong> on the chart.</p>
</div>
</section>
<section id="grammar-of-graphics-2" class="level2">
<h2 class="anchored" data-anchor-id="grammar-of-graphics-2">Grammar of Graphics</h2>
<p>Different types of graphs may appear completely distinct, but in actuality share many common elements.</p>
<p>By making different visual choices, you can use graphs to highlight different aspects of the same data.</p>
<p>For example, here are three ways of displaying the same data:</p>
<div class="cell" data-layout-align="bottom">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-bottom">
<figure class="figure">
<p><img src="1-GraphicsIntro_files/figure-html/plots-3-1.png" class="img-fluid quarto-figure quarto-figure-bottom figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<p>Different types of graphs may, at first glance, appear completely distinct. But in fact, graphs share many common elements, such as coordinate systems and using geometric shapes to represent data.</p>
<p>By making different visual choices (Cartesian or polar coordinates, points or lines or bars to represent data), you can use graphs to highlight different aspects of the same data. For example, here are three ways of displaying the same data:</p>
<p>Each of these charts display the count of diamonds of each cut in the data set. The first chart (bar-chart) displays a bar for each cut where the length of the bar resembles the number of diamonds in that cut. The second chart (fill-bar, aka stacked bar-chart) displays one bar sectioned into the different cuts by color. The third chart (fill-bar, pie chart) displays the stacked bar-chart in polar coordinates where the sections again represent the different cuts. Later we will discuss benefits and pitfalls of the different types of charts.</p>
</div>
</section>
<section id="grammar-of-graphics-3" class="level2">
<h2 class="anchored" data-anchor-id="grammar-of-graphics-3">Grammar of Graphics</h2>
<p>Statistical graphic specifications are expressed in six statements:</p>
<ol type="1">
<li><p><strong>DATA</strong>: a set of data operations that create variables from datasets</p></li>
<li><p><strong>TRANS</strong>: variable transformations</p></li>
<li><p><strong>SCALE</strong>: scale transformations</p></li>
<li><p><strong>COORD</strong>: a coordinate system</p></li>
<li><p><strong>ELEMENT</strong>: graphs (points) and their aesthetic attributes (color)</p></li>
<li><p><strong>GUIDE</strong>: one or more guides (axes, legends, etc.)</p></li>
</ol>
<div class="notes">
<p>The internal processes that constitute the syntax of the grammar of graphics <br> <br></p>
<p><img src="images/grammar.png" class="img-fluid"></p>
<p>a data flow diagram that shoes what the stages are, how they must be ordered, and what data are required along the way</p>
<p>provides us the ingredients and the dependencies among them, but it does not tell us how to assemble the ingredients</p>
<p>The Recipe:</p>
<ol type="1">
<li>Create variables – extract data into variables</li>
<li>apply algebra –</li>
<li>apply scales – ex. categorical</li>
<li>compute statistics</li>
<li>construct geometry</li>
<li>apply coordinates - ex. for polar: send (x,y) to (r, theta)</li>
</ol>
<ul>
<li>by postponing the coordinnates operation as late in the pipeline as possible, we have made the system more flexible</li>
</ul>
<ol start="7" type="1">
<li>compute aesthetics</li>
</ol>
<ul>
<li>aesthetic functions translate a graph into a graphic, which is a set of drawing instructions for a renderer ex. position, color, label</li>
</ul>
</div>
</section>
<section id="limitations" class="level2">
<h2 class="anchored" data-anchor-id="limitations">Limitations</h2>
<p>The Grammar of Graphics…</p>
<ul>
<li><p>tells us what words make up our graphical “sentences,” but offers no advice on how to write well</p></li>
<li><p>is not about good taste, practice, or graphic design</p></li>
<li><p>is useful, but is not all encompassing</p></li>
<li><p>does not include interactive graphics</p></li>
<li><p>does not include a few interesting and useful charts</p></li>
</ul>
</section>
</section>
<section id="ggplot2" class="level1 inverse page-columns page-full">
<h1 class="inverse">ggplot2</h1>
<section id="a-layered-grammar-of-graphics" class="level2">
<h2 class="anchored" data-anchor-id="a-layered-grammar-of-graphics">A layered grammar of graphics</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/ggplot2-hex.png" class="img-fluid quarto-figure quarto-figure-center figure-img" data-fig-width="350px"></p>
</figure>
</div>
</section>
<section id="a-layered-grammar-vs-the-grammar-of-graphics" class="level2">
<h2 class="anchored" data-anchor-id="a-layered-grammar-vs-the-grammar-of-graphics">A layered grammar vs The Grammar of Graphics</h2>
<p><code>ggplot2</code> is based on the more general concept of the Grammar of Graphics</p>
<p><img src="images/layered-grammar.png" class="img-fluid"></p>
<p>The components are independent, meaning that we can generally change a single component in isolation</p>
</section>
<section id="what-is-a-graphic" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="what-is-a-graphic">What is a graphic?</h2>
<p>ggplot2 uses the idea that you can build every graph with graphical components from three sources</p>
<ol type="1">
<li><p>the <strong>data</strong>, represented by <strong>geoms</strong></p></li>
<li><p>the <strong>scales</strong> and <strong>coordinate system</strong></p></li>
<li><p>the <strong>plot annotations</strong></p></li>
</ol>
<ul>
<li>to display values, map variables in the data to visual properties of the geom (<strong>aesthetics</strong>) like <strong>size</strong>, <strong>color</strong>, and <strong>x</strong> and <strong>y</strong> locations</li>
</ul>
<p><img src="images/build1.png" class="img-fluid"><img src="images/build2.png" class="img-fluid"></p>
</section>
<section id="ggplot2-a-layered-grammar" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="ggplot2-a-layered-grammar">ggplot2: A layered grammar</h2>
<p>The layered grammar defines the components of a plot as:</p>
<ol type="1">
<li><p>a default data set and set of mappings from variables to aesthetics</p></li>
<li><p>one or more layers, each layer having one geometric object, one statistical transformation, one position adjustment, and optionally, one data set and set of aesthetic mappings</p></li>
<li><p>one scale for each aesthetic mapping used</p></li>
<li><p>a coordinate system</p></li>
<li><p>the facet specification</p></li>
</ol>
<p><img src="images/l.png" class="img-fluid" style="width:50.0%"></p>
</section>
<section id="what-is-a-layer" class="level2">
<h2 class="anchored" data-anchor-id="what-is-a-layer">What is a Layer?</h2>
<ul>
<li><p>it determines the physical representation of the data</p></li>
<li><p>a plot may have multiple layers</p>
<ul>
<li>usually all the layers on a plot have something in common, i.e.&nbsp;different views of the same data</li>
</ul></li>
<li><p>a layer is composed of four parts:</p>
<ol type="1">
<li>data and aesthetic mapping</li>
<li>a statistical transformation (stat)</li>
<li>a geometric object (geom)</li>
<li>a position adjustment</li>
</ol></li>
</ul>
</section>
<section id="ggplot2-specifications" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="ggplot2-specifications">ggplot2: Specifications</h2>
<p>A plot consists of several mostly independent specifications:</p>
<ol type="1">
<li><strong>aesthetics</strong> - links between data variables and graphical features (position, color, shape, size)</li>
<li><strong>layers</strong> - geometric elements (points, lines, rectangles, text, …)</li>
<li><strong>transformations</strong> - transformations specify a functional link between the data and the displayed information (identity, count, bins, density, regression). Transformations act on the variables.</li>
<li><strong>scales</strong> - scales map values in data space to values in the aesthetic space. Scales change the coordinate space of an aesthetic, but don’t change the underlying value (so the change is at the visual level, not the mathematical level).</li>
<li><strong>coordinate system</strong> - e.g.&nbsp;polar or Cartesian</li>
<li><strong>faceting</strong> - facets allow you to split plots by other variables to produce many sub-plots.</li>
<li><strong>theme</strong> - formatting items, such as background color, fonts, margins…</li>
</ol>
</section>
<section id="ggplot2-a-layered-grammar-1" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="ggplot2-a-layered-grammar-1">ggplot2: A layered grammar</h2>
<div class="cell" data-layout-align="top">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-top">
<figure class="figure">
<p><img src="1-GraphicsIntro_files/figure-html/gg-layers-1.png" class="img-fluid quarto-figure quarto-figure-top figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
<style>
.column-left{
  float: left;
  width: 32%;
  text-align: left;
}
.column-center{
  display: inline-block;
  width: 34%;
  text-align: left;
}
.column-right{
  float: right;
  width: 32%;
  text-align: left;
}
</style>
<div class="column-left">
<p style="font-size:14px">
data: diamonds <br> layer: <br> - aes: x = cut, y = count, fill = cut <br><br>
- geom: bar <br> coordinates: Cartesian
</p>
</div>
<div class="column-center">
<p style="font-size:14px">
data: diamonds <br> layer: <br> - aes: x = 1, y = count, fill = cut <br> - geom: fill-bar <br> coordinates: Cartesian <br>
</p>
</div>
<div class="column-right">
<p style="font-size:14px">
data: diamonds <br> layer: <br> - aes: x = 1, y = count, fill = cut <br> - geom: fill-bar <br> coordinates: Polar <br>
</p>
</div>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1"></h2>
<p><img src="images/ggplot2.jpg" class="img-fluid" data-fig-width="auto" alt="Building a Data Masterpiece with ggplot2, by Allison Horst"></p>
<p>Building a masterpiece, by <a href="https://www.allisonhorst.com/">Allison Horst</a></p>
</section>
</section>
<section id="make-your-first-figure" class="level1 inverse">
<h1 class="inverse">Make your first figure</h1>
<section id="r-package-and-data-set" class="level2">
<h2 class="anchored" data-anchor-id="r-package-and-data-set">R package and data set</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2) <span class="co">#&lt;&lt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(diamonds) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 9%">
<col style="width: 15%">
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">carat</th>
<th style="text-align: left;">cut</th>
<th style="text-align: left;">color</th>
<th style="text-align: left;">clarity</th>
<th style="text-align: right;">depth</th>
<th style="text-align: right;">table</th>
<th style="text-align: right;">price</th>
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: right;">z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">61.5</td>
<td style="text-align: right;">55</td>
<td style="text-align: right;">326</td>
<td style="text-align: right;">3.95</td>
<td style="text-align: right;">3.98</td>
<td style="text-align: right;">2.43</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.21</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI1</td>
<td style="text-align: right;">59.8</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">326</td>
<td style="text-align: right;">3.89</td>
<td style="text-align: right;">3.84</td>
<td style="text-align: right;">2.31</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">VS1</td>
<td style="text-align: right;">56.9</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">327</td>
<td style="text-align: right;">4.05</td>
<td style="text-align: right;">4.07</td>
<td style="text-align: right;">2.31</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.29</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">I</td>
<td style="text-align: left;">VS2</td>
<td style="text-align: right;">62.4</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">334</td>
<td style="text-align: right;">4.20</td>
<td style="text-align: right;">4.23</td>
<td style="text-align: right;">2.63</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.31</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">63.3</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">335</td>
<td style="text-align: right;">4.34</td>
<td style="text-align: right;">4.35</td>
<td style="text-align: right;">2.75</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.24</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">VVS2</td>
<td style="text-align: right;">62.8</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">336</td>
<td style="text-align: right;">3.94</td>
<td style="text-align: right;">3.96</td>
<td style="text-align: right;">2.48</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="begin-with-the-data" class="level2">
<h2 class="anchored" data-anchor-id="begin-with-the-data">Begin with the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="1-GraphicsIntro_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="then-specify-aesthetic-mappings" class="level2">
<h2 class="anchored" data-anchor-id="then-specify-aesthetic-mappings">Then specify aesthetic mappings</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="1-GraphicsIntro_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<div class="notes">
<p>or what relationships we want to see</p>
</div>
</section>
<section id="choose-a-geom" class="level2">
<h2 class="anchored" data-anchor-id="choose-a-geom">Choose a geom</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="1-GraphicsIntro_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="add-geom-specific-aesthetics" class="level2">
<h2 class="anchored" data-anchor-id="add-geom-specific-aesthetics">Add geom-specific aesthetics</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour =</span> cut)) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="1-GraphicsIntro_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="add-another-layer" class="level2">
<h2 class="anchored" data-anchor-id="add-another-layer">Add another layer…</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour =</span> cut)) <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>() <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="1-GraphicsIntro_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mapping-vs-setting-aesthetics" class="level2">
<h2 class="anchored" data-anchor-id="mapping-vs-setting-aesthetics">Mapping vs setting aesthetics</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price) <span class="sc">+</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour =</span> cut), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">fill =</span> cut), <span class="at">colour =</span> <span class="st">"lightgrey"</span>) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="1-GraphicsIntro_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="specify-coordinate-transformations" class="level2">
<h2 class="anchored" data-anchor-id="specify-coordinate-transformations">Specify Coordinate transformations</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour =</span> cut), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">fill =</span> cut), <span class="at">colour =</span> <span class="st">"lightgrey"</span>) <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_log10</span>() <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="1-GraphicsIntro_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="add-nuance-with-facets" class="level2">
<h2 class="anchored" data-anchor-id="add-nuance-with-facets">Add nuance with facets</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour =</span> cut), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">fill =</span> cut), <span class="at">colour =</span> <span class="st">"lightgrey"</span>) <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>cut) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="1-GraphicsIntro_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>