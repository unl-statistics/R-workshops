<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Packages and Basic Programming</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Packages and Basic Programming

---


## R Packages

- Commonly used R functions are installed with base R

- R packages containing more specialized R functions can be installed freely from CRAN servers using function `install.packages()`

- After packages are installed, their functions can be loaded into the current R session using the function `library()`

---
## Finding R Packages

- How do I locate a package with the desired function?

- Google ("R project" + search term works well)

- R website task views to search relevent subjects: http://cran.r-project.org/web/views/

- ??searchterm will search R help for pages related to the search term

&lt;!--
 `sos` package adds helpful features for searching for packages related to a particular topic
--&gt;

---
## Handy R Packages

- `ggplot2`: Statistical graphics

- `dplyr`/`tidyr`: Manipulating data structures

- `lme4`: Mixed models

- `knitr`: integrate LaTeX, HTML, or Markdown with R for easy reproducible research

- `vegan`: Ordination methods, diversity analysis and other
functions for community and vegetation ecologists.

- `phyloseq`: Handling and analysis of high-throughput microbiome census data

- `ggtree`: an R package for visualization and annotation of phylogenetic trees with their covariates and other associated data

- `Biostrings`: Efficient manipulation of biological strings

&lt;!-- this needs updated!! --&gt;

---
## Creating Your Own Functions

Code Skeleton:


```r
foo &lt;- function(arg1, arg2, ...) {
    # Code goes here
    return(output)
}
```

Example:


```r
mymean &lt;- function(data) {
    ans &lt;- sum(data) / length(data)
    return(ans)
}
```

---
## If/Else Statements

Skeleton:


```r
if (condition) {
    # Some code that runs if condition is TRUE
} else {
    # Some code that runs if condition is FALSE
}
```

Example:


```r
mymean &lt;- function(data) {
    if (!is.numeric(data)) {
        stop("Numeric input is required")
    } else {
        ans &lt;- sum(data) / length(data)
        return(ans)
    }
}
```

---
## Looping

- Reducing the amount of typing we do can be nice

- If we have a lot of code that is essentially the same we can take advantage of looping.

- R offers several loops: `for`, `while`, `repeat`.


```r
for (i in 1:3) {
    print(i)
}
```

```
## [1] 1
## [1] 2
## [1] 3
```

---
## For Loops


```r
final_shed &lt;- read.csv("http://heike.github.io/rwrks/01-r-intro/data/final_shedding.csv")

id &lt;- c("pig_weight", "total_shedding", "daily_shedding")
for (colname in id) {
    print(colname)
}
```

```
## [1] "pig_weight"
## [1] "total_shedding"
## [1] "daily_shedding"
```

```r
# this does NOT work if the csv is read in using read_csv
for(colname in id) {
    print(paste(colname, mymean(final_shed[, colname])))
}
```

```
## [1] "pig_weight 28.8230508474576"
## [1] "total_shedding 40.6754134817021"
## [1] "daily_shedding 3.44509255080266"
```

---
## While Loops


```r
i &lt;- 1
while (i &lt;= 5) {
    print(i)
    i &lt;- i + 1
}
```

```
## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
```

---
class: inverse
## Your Turn 

1. Create a function that takes numeric input and provides the mean and a 95% confidence interval for the mean for the data (the t.test function could be useful)

2. Add checks to your function to make sure the data is either numeric or logical.  If it is logical convert it to numeric.

3. The diamonds data set is included in the `ggplot2` package and is well known as a convenient data set for examples. It can be read into your environment with the function `data("diamonds", package = "ggplot2")`. Loop over the columns of the diamonds data set and apply your function to all of the numeric columns.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
