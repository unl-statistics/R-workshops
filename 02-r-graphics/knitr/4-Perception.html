<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Data Visualization</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Data Visualization
## Using ggplot2

---






class: center, middle

# PERCEPTION

---

# Why are some plots easier to read than others?

What makes bad figures bad?

- issues can be (1) aesthetic, (2) substantive, and/or (3) perceptual 


---

# Why are some plots easier to read than others?

What makes bad figures bad?

- issues can be (1) **aesthetic**, (2) substantive, and/or (3) perceptual 
&lt;br/&gt;&lt;br/&gt;

- Edward R. Tufte is a better known critic of this style of visualization

- Graphical excellence is the well-designed presentation of interesting data and consists of:

  - complex ideas communicated with clarity, precision, and efficiency

  - maximizes the “data-to-ink” ratio.

  - nearly always multivariate 

  - requires telling the truth about the data. 

- defines "chartjunk" as superfluous details

???

While chartjunk is not entirely devoid of merit, bear in mind that ease of recall is only one virtue amongst many for graphics.

---

# Why are some plots easier to read than others?

What makes bad figures bad?

- issues can be (1) aesthetic, (2) **substantive**, and/or (3) perceptual 
&lt;br/&gt;&lt;br/&gt;

- bad data
---

# Why are some plots easier to read than others?

What makes bad figures bad?

- issues can be (1) aesthetic, (2) substantive, and/or (3) **perceptual **
&lt;br/&gt;&lt;br/&gt;

- Looking at pictures of data means looking at lines, shapes, and colors

- Our visual system works in a way that makes some things easier for us to see than others

- “Preattentive” features

- Gestalt Principles

- color and contrast

???

---
# Good Graphics

Graphics consist of:

- **Structure**: boxplot, scatterplot, etc.

- **Aesthetics**: features such as color, shape, and size that map other characteristics to structural features

Both the structure and aesthetics should help viewers interpret the information.

---
class: center, middle, inverse

# Gestalt Principles
### What sorts of relationships are inferred, and under what circumstances? 

---

# Which has more structure?
.center[
![](4-Perception_files/figure-html/rand-1.png)&lt;!-- --&gt;
]
???

We look for structure all the time. We are so good at it that we will find it in random data, given time. (This is one of the reasons that data visualization can hardly be a replacement for statistical modeling.) The strong inferences we make about relationships between visual elements from relatively sparse visual information are called “gestalt rules”. They are not pure perceptual effects, like the checkerboard illusions. Rather, they describe our tendency to infer relationships between the objects we are looking at in a way that goes beyond what is strictly visible.

---
# Gestalt principles

.center[
![](images/gestalt3.jpg)
]


???

---

# Gestalt principles

What sorts of relationships are inferred, and under what circumstances? 

- **Proximity**: Things that are spatially near to one another are related.

- **Similarity**: Things that look alike are related.

- **Enlosure**: A group of related elements are surrounded with a visual element

- **Symmetry**: If an object is asymmetrical, the viewer will waste time trying to find the problem instead of concentrating on the instruction.

- **Closure**: Incomplete shapes are perceived as complete.

- **Continuity**: Partially hidden objects are completed into familiar shapes.

- **Connection**: Things that are visually tied to one another are related.

- **Figure/Ground**: Visual elements are either in the foreground or the background.

---
class: center, middle, inverse

# Pre-Attentive Features

---

# Pre-Attentive Features

&lt;img src="4-Perception_files/figure-html/unnamed-chunk-1-1.png" style="display: block; margin: auto;" /&gt;

---

# Pre-Attentive Features

&lt;img src="4-Perception_files/figure-html/unnamed-chunk-2-1.png" style="display: block; margin: auto;" /&gt;

---
# Pre-Attentive Features

Pre-Attentive Features are things that "jump out" in less than 250 ms

- Color, form, movement, spatial localization

There is a hierarchy of features

- Color is stronger than shape

- Combinations of pre-attentive features are usually not pre-attentive due to **interference**

---

## Pre-attentive Features

&lt;img src="4-Perception_files/figure-html/unnamed-chunk-3-1.png" style="display: block; margin: auto;" /&gt;

---

## Pre-attentive Features

&lt;img src="4-Perception_files/figure-html/unnamed-chunk-4-1.png" style="display: block; margin: auto;" /&gt;

---

## Color

- **Hue**: shade of color (red, orange, yellow...)

- **Intensity**: amount of color

- Both color and hue are pre-attentive. Bigger contrast corresponds to faster detection.

- Use color to your advantage

- When choosing color schemes, we will want mappings from data to color that are not just numerically but also ***perceptually*** uniform

- Distinguish bewteen sequential scales and categorical scales

---

## Color

Color is context-sensitive: A and B are the same intensity and hue, but appear to be different.

![Edward Adelson’s checkershadow illusion](images/shadow-illusion3.jpg)

---

## Ordering Variables

Which is bigger?

- Position: higher is bigger (y), items to the right are bigger (x)
- Size, Area
- Color: not always ordered. More contrast = bigger.
- Shape: Unordered. 

![](4-Perception_files/figure-html/unnamed-chunk-5-1.png)&lt;!-- --&gt;

---
class: center, middle, inverse

# Aesthetics in `ggplot2`
## scales

---

## Aesthetics in `ggplot2`

**Aesthetics**: features such as color, shape, and size that map other characteristics to structural features

**Scales** map data values to the visual values of an aesthetic  

 - to change a mapping, add a new scale
 
 .center[
 &lt;img src="images/scales1.png" alt="ggplot2-hex" style="width:550px;"/&gt;
 ]

---
## Scales

.pull-left[
&lt;img src="4-Perception_files/figure-html/unnamed-chunk-6-1.png"  /&gt;
]
.pull-right[
&lt;img src="4-Perception_files/figure-html/unnamed-chunk-7-1.png"  /&gt;
]

---
## Gradients

Qualitative schemes: no more than 7 colors


![](4-Perception_files/figure-html/unnamed-chunk-8-1.png)&lt;!-- --&gt;

&lt;small&gt;
Can use `colorRampPalette()` from the RColorBrewer package to produce larger palettes by interpolating existing ones
&lt;/small&gt;

![](4-Perception_files/figure-html/unnamed-chunk-9-1.png)&lt;!-- --&gt;

Quantitative schemes: use color gradient with only one hue for positive values

![](4-Perception_files/figure-html/unnamed-chunk-10-1.png)&lt;!-- --&gt;

---

## More Gradients

Quantitative schemes: use color gradient with two hues for positive and negative values. Gradient should go through a light, neutral color (white)

![](4-Perception_files/figure-html/unnamed-chunk-11-1.png)&lt;!-- --&gt;

Small objects or thin lines need more contrast than larger areas

---
## Factors vs. Continuous variables

- Factor variable:
    - `scale_colour_discrete`
    - `scale_colour_brewer(palette = ...)`
- Continuous variable:
    - `scale_colour_gradient` (define low, high values)
    - `scale_colour_gradient2` (define low, mid, and high values)
    - Equivalents for fill: `scale_fill_...`

&lt;img src="4-Perception_files/figure-html/unnamed-chunk-12-1.png"  /&gt;

---
## Color in ggplot2

There are packages available for use that have color scheme options.

Some Examples:

  - Rcolorbrewer
  - ggsci
  - viridis
  - wes anderson


---
## Color in ggplot2

- There are packages available for use that have color schemes options.


![](4-Perception_files/figure-html/unnamed-chunk-13-1.png)&lt;!-- --&gt;
  
  

---
class: inverse
## Your Turn 

- In the diamonds data, clarity and cut are ordinal, while price and carat are continuous

- Find a graphic that gives an overview of these four variables while respecting their types


---
class: inverse
## Your Turn

The `movies` dataset contains information from IMDB.com including ratings, genre, length in minutes, and year of release.


```r
movies &lt;- read.csv("http://heike.github.io/rwrks/02-r-graphics/data/MovieSummary.csv")
```
                   

- Explore the differences in length, rating, etc. in movie genres over time
- Hint: use facetting!


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
