<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Data Visualization</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/plotly-binding/plotly.js"></script>
    <script src="libs/typedarray/typedarray.min.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main/plotly-latest.min.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Data Visualization
]
.subtitle[
## Using ggplot2
]

---






class: center, middle

# POLISHING PLOTS

---
class: inverse, center, middle

# Visual Appearance

---

## Built-In Themes

![](5-PolishingPlots_files/figure-html/unnamed-chunk-2-1.png)&lt;!-- --&gt;

---

## Other Themes: `ggthemes` a ggplot2 extension

![](5-PolishingPlots_files/figure-html/unnamed-chunk-3-1.png)&lt;!-- --&gt;



---

## Setting Themes

You can globally set a theme with the `theme_set()` function:

&lt;img src="5-PolishingPlots_files/figure-html/unnamed-chunk-4-1.png" style="display: block; margin: auto;" /&gt;


---

## Elements in a theme

The function `theme()` is used to control non-data parts of the graph including:

- **Line elements**: axis lines, minor and major grid lines, plot panel border, axis ticks background color, etc.  
- **Text elements**: plot title, axis titles, legend title and text, axis tick mark labels, etc.  
- **Rectangle elements**: plot background, panel background, legend background, etc.  

There is a specific function to modify each of these three elements :

- `element_line()` to modify the line elements of the theme
- `element_text()` to modify the text elements
- `element_rect()` to change the appearance of the rectangle elements
- `element_blank()` to draw nothing and assign no space

**Note**: `rel()` is used to specify sizes relative to the parent, `margins()` is used to specify the margins of elements.

---


## Modifying a plot




&lt;img src="5-PolishingPlots_files/figure-html/unnamed-chunk-6-1.png" style="display: block; margin: auto;" /&gt;

---

## Plot Legends




![](5-PolishingPlots_files/figure-html/unnamed-chunk-8-1.png)&lt;!-- --&gt;

---

## Modifying Axes


```r
p4 &lt;- p3 + theme(
  ### remove axis ticks
* axis.ticks=element_blank(),
  ### modify axis lines
* axis.line.y = element_line(colour = "pink", size = 1, linetype = "dashed"),
* axis.line.x = element_line(colour = "pink", size = 1.2, linetype = "dashed")
  )
```

![](5-PolishingPlots_files/figure-html/unnamed-chunk-10-1.png)&lt;!-- --&gt;


---

## Plot Labels

Can be modified in several ways:
- `labs()`, `xlab()`, `ylab()`, `ggtitle()`
- You can also set axis and legend labels in the individual scales (using the first argument, the name) e.g. `scale_x_continuous()`
.

```r
p5 &lt;- p4 + 
* labs(x = "Class of car",
*      y = "",
*      title = "Cars by class and manufacturer",
*      subtitle = "With a custom theme!!")
```

![](5-PolishingPlots_files/figure-html/unnamed-chunk-12-1.png)&lt;!-- --&gt;


---

## Zooming


```r
p &lt;- ggplot(mtcars, aes(x = wt, y = mpg, colour = gear)) + 
  geom_point() 

p_zoom_in &lt;- p + 
* xlim(2, 4) +
* ylim(10, 25)

p_zoom_out &lt;- p + 
* scale_x_continuous(limits = c(0,7)) +
* scale_y_continuous(limits = c(0, 45))
```

![](5-PolishingPlots_files/figure-html/unnamed-chunk-14-1.png)&lt;!-- --&gt;

---
class: inverse, center, middle

# Interactive graphics

---
## Plotly

<div id="htmlwidget-d7f180506589a633bc8a" style="width:576px;height:360px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d7f180506589a633bc8a">{"x":{"data":[{"x":[3.215,3.44,3.46,3.57,4.07,3.73,3.78,5.25,5.424,5.345,2.465,3.52,3.435,3.84,3.845],"y":[21.4,18.7,18.1,14.3,16.4,17.3,15.2,10.4,10.4,14.7,21.5,15.5,15.2,13.3,19.2],"text":["wt: 3.215<br />mpg: 21.4<br />gear: 3","wt: 3.440<br />mpg: 18.7<br />gear: 3","wt: 3.460<br />mpg: 18.1<br />gear: 3","wt: 3.570<br />mpg: 14.3<br />gear: 3","wt: 4.070<br />mpg: 16.4<br />gear: 3","wt: 3.730<br />mpg: 17.3<br />gear: 3","wt: 3.780<br />mpg: 15.2<br />gear: 3","wt: 5.250<br />mpg: 10.4<br />gear: 3","wt: 5.424<br />mpg: 10.4<br />gear: 3","wt: 5.345<br />mpg: 14.7<br />gear: 3","wt: 2.465<br />mpg: 21.5<br />gear: 3","wt: 3.520<br />mpg: 15.5<br />gear: 3","wt: 3.435<br />mpg: 15.2<br />gear: 3","wt: 3.840<br />mpg: 13.3<br />gear: 3","wt: 3.845<br />mpg: 19.2<br />gear: 3"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(212,63,58,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(212,63,58,1)"}},"hoveron":"points","name":"3","legendgroup":"3","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.62,2.875,2.32,3.19,3.15,3.44,3.44,2.2,1.615,1.835,1.935,2.78],"y":[21,21,22.8,24.4,22.8,19.2,17.8,32.4,30.4,33.9,27.3,21.4],"text":["wt: 2.620<br />mpg: 21.0<br />gear: 4","wt: 2.875<br />mpg: 21.0<br />gear: 4","wt: 2.320<br />mpg: 22.8<br />gear: 4","wt: 3.190<br />mpg: 24.4<br />gear: 4","wt: 3.150<br />mpg: 22.8<br />gear: 4","wt: 3.440<br />mpg: 19.2<br />gear: 4","wt: 3.440<br />mpg: 17.8<br />gear: 4","wt: 2.200<br />mpg: 32.4<br />gear: 4","wt: 1.615<br />mpg: 30.4<br />gear: 4","wt: 1.835<br />mpg: 33.9<br />gear: 4","wt: 1.935<br />mpg: 27.3<br />gear: 4","wt: 2.780<br />mpg: 21.4<br />gear: 4"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(238,162,54,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(238,162,54,1)"}},"hoveron":"points","name":"4","legendgroup":"4","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.14,1.513,3.17,2.77,3.57],"y":[26,30.4,15.8,19.7,15],"text":["wt: 2.140<br />mpg: 26.0<br />gear: 5","wt: 1.513<br />mpg: 30.4<br />gear: 5","wt: 3.170<br />mpg: 15.8<br />gear: 5","wt: 2.770<br />mpg: 19.7<br />gear: 5","wt: 3.570<br />mpg: 15.0<br />gear: 5"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(92,184,92,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(92,184,92,1)"}},"hoveron":"points","name":"5","legendgroup":"5","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":27.689497716895,"r":7.30593607305936,"b":41.6438356164384,"l":37.2602739726027},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1.31745,5.61955],"tickmode":"array","ticktext":["2","3","4","5"],"tickvals":[2,3,4,5],"categoryorder":"array","categoryarray":["2","3","4","5"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"wt","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[9.225,35.075],"tickmode":"array","ticktext":["10","15","20","25","30","35"],"tickvals":[10,15,20,25,30,35],"categoryorder":"array","categoryarray":["10","15","20","25","30","35"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"mpg","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"gear","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"88677a2c87dd":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"88677a2c87dd","visdat":{"88677a2c87dd":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>

---
class: inverse, center, middle

# Saving graphics


---

## Saving your Work

We can save the results of a plot to a file (as an image) using the `ggsave()` function:



---
class: inverse
## Your Turn

1. Create a scatterplot of `bill length` versus `bill width` from the `penguins` and color by species.
2. Use the black and white theme
3. Clean up axis labels and include an informative title.
4. Capitalize legend title and change the color palette from default.
5. Move the legend to the bottom and set aspect ratio to 1.
6. Save your plot to a pdf file and open it in a pdf viewer.
7. Save a png of the same scatterplot. 
8. Embed the png into MS word or another editor.	 


```r
install.packages("palmerpenguins")
data(penguins, package = "palmerpenguins")
head(penguins)
```
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
