<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Structure of a Shiny Applet</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Structure of a Shiny Applet

---


## Reactivity

- shiny is built on the idea of **reactive programming**. 
  - i.e. outputs automatically update whenever an input value changes

```
input values =&gt; R code =&gt; output values
```

**Reactive expressions** keep track of what values they read and what values they change. If those values become "out of date", they know their return value is out of date and will automatically recalculate.

---
## A Tale of Two Files

Shiny applications have two components: 

- **ui.R** defines the page layout and user interface
- **server.R** contains the R code to create any output

---
## ui.R


```r
library(shiny)

# A simple/common user interface template
ui &lt;- fluidPage(

  # Application title
  titlePanel("Title"),
  
  sidebarPanel(
    # Define some inputs here
  ),
  
  mainPanel(
    # outputs` (from the server) go here
  )

)
```

---
## User Interface (ui)

- elements of the user interface are called **widgets**
- we distinguish between `input` and `output`
- overview of available input widgets in shiny at http://shiny.rstudio.com/gallery/widget-gallery.html
- input widgets have a similar structure `xxxInput (inputId, label, value)` where `xxx` is the name of the widget
    - `inputId` is the (unique) name you give to the widget (object name)
    - `label` is the text that appears with the widget in interface
    - `value` all widgets have a value - the type of this value is specific to the widget
    - ... other parameters are widget-specific

---
## server.R


```r
# Server side logic 
server &lt;- function(input, output) {
  # do something
}
```

---
## A minimal shiny app

```
library(shiny)

ui &lt;- fluidPage()
server &lt;- function(input, output) {
}

shinyServer(ui, server)
```

- save this code in a separate folder call the file `app.R`
- run the code: either paste into the console or use `runApp` on folder name

---
## Shiny Inputs


```r
textInput("text", label = h3("Text input"), value = "Enter text...")
```

&lt;br&gt;

`h3()` is just converting html into a header of level 3:

```r
h3("Hello")
```

```
&lt;h3&gt;Hello&lt;/h3&gt;
```


```r
selectInput("select", label = h3("What do you like?"), 
            choices = c("Pizza", "Ice cream", 
                        "Donuts", "None of the above"), 
            selected=2)
```

---
## Shiny Inputs (cont'd)

- `actionButton()` - creates a clickable button
- `checkboxInput()` and `checkboxGroupInput()`
- `dateInput()` - calendar to select a date
- `dateRangeInput()` - select a range of dates
- `fileInput()` - upload a file
- `numericInput()` - input a numeric value
- `radioButtons()` - select one or more items
- `sliderInput()` - slide along a range of values
- `textInput()` - input a string

[widget resource](http://shiny.rstudio.com/gallery/widget-gallery.html)

---
class: inverse
## Your Turn

- Consider extending the hello world example:


```r
runApp("01_Hello", display.mode = "showcase")
```

- **Challenge 1:** add an input to change the mean and standard deviation (Hint: see `?numericInput`).

- **Challenge 2:** add an input to simulate from a gamma as well as a normal (Hint: you can simulate from gamma distribution with `rgamma`).

- **Challenge 3:** (Tricky) how do we get the shiny app to react to the input?

---
## Shiny Outputs

Shiny also has a set of output functions with general structure:

```
xxxOutput (outputId, ...)
```
where `outputId` is a (unique) object name (and `xxx` is one of the choices below)

- `html`, `image`, `plot`, `table`, `text`,  creates what the names says

- `uiOutput`	raw HTML

- `verbatimTextOutput`	text

Outputs have width and height, might be clickable, hoverable, ...


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
